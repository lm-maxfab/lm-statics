!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).gdpr={})}(this,(function(e){"use strict";const t=e=>e.replace(/.*\.([^.]*[^0-9][^.]*\.[^.]*[^.0-9][^.]*$)/,"$1"),n=e=>{const t=window.location.href,n=new RegExp(`[\\?&]${e}=?([^&#]*)?`).exec(t);return null!==n&&n[1]},o={info:"#015e7a",warning:"#7a5901",error:"#7a1d01"},r=(e,t)=>{"object"!=typeof e&&(e=[e]);const r=o[t]||"#222",s="info"===t?"log":t;console&&"function"==typeof console[s]&&!1!==n("gdpr_debug")&&console[s]("%cGDPR",`display: inline-block; color: #ffffff; background: ${r}; font-weight: 600; padding: 1px 4px; border-radius: 3px;`,...e)},s=e=>(e=>{"verbose"===n("gdpr_debug")&&r(e,"info")})(e),i=e=>r(e,"info"),a=e=>r(e,"error"),c=e=>r(e,"warning"),u=(e,t)=>(Object.keys(t).forEach((n=>{void 0===e[n]?e[n]=t[n]:typeof t[n]!=typeof e[n]?c(`bad configuration type for ${n}, must be an instance of ${typeof e[n]}`):"object"==typeof t[n]?u(e[n],t[n]):e[n]=t[n]})),e),p={displayMode:"standard",lang:"fr",hosts:{cmp:`cmp.${t(document.location.hostname)}`},abtests:{token:!1,defaultToken:100,variants:[]},content:{paramsRefresh:!0},modules:{parameters:{name:"gdpr-glm-params",css:"/css/default/parameters.min.css",tpl:"/html/default/parameters.html"},partners:{name:"gdpr-glm-partners",css:"/css/default/partners.min.css",tpl:"/html/default/partners.html"},standard:{name:"gdpr-glm-standard",css:"/css/default/standard.min.css",tpl:"/html/default/standard.html"},amp_main:{name:"gdpr-glm-amp",css:"/css/default/amp.min.css",tpl:"/html/default/main-amp.html"},amp_frame:{name:"gdpr-glm-frame",css:"/css/default/frame.min.css",tpl:"/html/default/frame-amp.html"}},setTemplate:e=>{void 0!==p.modules[p.displayMode]&&(p.modules[p.displayMode].tpl=e)},override:e=>{Object.keys(e).forEach((t=>{void 0===p[t]?p[t]=e[t]:typeof e[t]!=typeof p[t]?c(`bad configuration type for ${t}, must be an instance of ${typeof p[t]}`):"object"==typeof e[t]?u(p[t],e[t]):p[t]=e[t]}))},overrideFromSite:()=>{p.override(window.GDPR_CONFIG||{}),!1!==n("gdpr_displayMode")&&(p.displayMode=n("gdpr_displayMode")),void 0!==p.tpl&&p.setTemplate(p.tpl)}};var l=(e,t,n=t-e+1)=>Array.from({length:n},((t,n)=>e+n));const d=document.currentScript||{src:`cmp.${t(document.location.hostname)}`},f=(d.src.match(/[^.]+.([^-]+)?-?lemonde.(fr|io)/)||[])[1]||"prd",h=new URL(d.src).hostname,m=()=>!("object"!=typeof lmd||!lmd.user||!lmd.user.abo)&&lmd.user.abo,g={hosts:{abo:"prd"===f?"abo.lemonde.fr":`${f}-abo.lemonde.io`,cmp:h,secure:"prd"===f?"secure.lemonde.fr":`secure.${f}-lemonde.fr`,www:"prd"===f?"www.lemonde.fr":`www.${f}-lemonde.fr`},wall:{blacklist:["secure.lemonde.fr","secure.stg-lemonde.fr","stg-secure.lemonde.io","abo.lemonde.fr","macommande.lemonde.fr","checkout.lemonde.fr"]},abtests:{token:!1,defaultToken:100,variants:[{key:"wall-tunnel-abo-essential",tokens:l(1,20),displayMode:m()?"subscriber":"cookiewall",tpl:m()?"/html/lemonde/subscriber.html":"/html/lemonde/wall-tunnel-abo-essential.html"}]},content:{siteName:"Le Monde",aName:"au Monde",deName:"du Monde"},modules:{parameters:{name:"gdpr-lmd-params",css:"/css/lemonde/parameters.min.css",tpl:"/html/lemonde/parameters.html"},partners:{name:"gdpr-lmd-partners",css:"/css/lemonde/partners.min.css",tpl:"/html/lemonde/partners.html"},remove:{name:"gdpr-lmd-remove",css:"/css/lemonde/remove.min.css",tpl:"/html/lemonde/remove.html"},standard:{name:"gdpr-lmd-standard",css:"/css/lemonde/standard.min.css",tpl:"/html/lemonde/standard-transparent-deny.html"},subscriber:{name:"gdpr-lmd-subscriber",css:"/css/lemonde/subscriber.min.css",tpl:"/html/lemonde/subscriber.html"},cookiewall:{name:"gdpr-lmd-wall",css:"/css/lemonde/wall.min.css",tpl:"/html/lemonde/wall.html"}}},y=(e,t)=>{const n=Element.prototype;return(n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||(e=>-1!==[].indexOf.call(document.querySelectorAll(e),window))).call(e,t)};var v=y;const b=(e,t,n,o)=>{e.addEventListener(t,(e=>{e.target&&v(e.target,n)&&o(e)}))};function _(e){document.addEventListener("DOMContentLoaded",e),"interactive"!==document.readyState&&"complete"!==document.readyState||e()}const E="data-popin-toggle-target",C="data-popin-toggle-scope",w="ui-collapse--shown",S=e=>{const t=(e=>e.hasAttribute(C)?document.querySelector(e.getAttribute(C)):e.parentNode)(e),n=((e,t)=>!!e.hasAttribute(E)&&t.querySelectorAll(e.getAttribute(E)))(e,t);let o;e.classList.toggle(w);const r=e.innerHTML;if("Voir toute la liste"===r?e.innerHTML="RÃ©duire la liste":"RÃ©duire la liste"===r&&(e.innerHTML="Voir toute la liste"),"Voir plus de villes"===r?e.innerHTML="Voir moins de villes":"Voir moins de villes"===r&&(e.innerHTML="Voir plus de villes"),n&&n.length>0)for(o=0;o<n.length;o+=1)n[o].classList.toggle(w)};function O(){return window.ATInternet&&window.ATInternet.Tracker&&Array.isArray(window.ATInternet.Tracker.instances)&&1===window.ATInternet.Tracker.instances.length?window.ATInternet.Tracker.instances[0]:null}function L(e){(function(){if(I())return window.cmpDataLayer;return window.cmpDataLayer=[],window.cmpDataLayer})().push(e)}function I(){return window.cmpDataLayer&&Array.isArray(window.cmpDataLayer)}b(document,"click",'[data-popin-toggle="collapse"]',(e=>{"A"===e.currentTarget.tagName&&e.preventDefault(),S(e.target)}));const A=window.setInterval((function(){s("call to sendSmartTagEvents");const e=O();if(s(`type of smartTag --\x3e ${typeof e}, is null ? --\x3e ${null===e}`),null===e)return;if(I())for(;window.cmpDataLayer.length>0;){const e=window.cmpDataLayer.pop();"function"==typeof e&&e()}s(`clearInterval ${A}`),clearInterval(A)}
/*!
   * cookie
   * Copyright(c) 2012-2014 Roman Shtylman
   * Copyright(c) 2015 Douglas Christopher Wilson
   * MIT Licensed
   */),1e3);var M=function(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var n={},o=t||{},r=e.split(j),s=o.decode||T,i=0;i<r.length;i++){var a=r[i],c=a.indexOf("=");if(!(c<0)){var u=a.substr(0,c).trim(),p=a.substr(++c,a.length).trim();'"'==p[0]&&(p=p.slice(1,-1)),null==n[u]&&(n[u]=k(p,s))}}return n},P=function(e,t,n){var o=n||{},r=o.encode||V;if("function"!=typeof r)throw new TypeError("option encode is invalid");if(!F.test(e))throw new TypeError("argument name is invalid");var s=r(t);if(s&&!F.test(s))throw new TypeError("argument val is invalid");var i=e+"="+s;if(null!=o.maxAge){var a=o.maxAge-0;if(isNaN(a)||!isFinite(a))throw new TypeError("option maxAge is invalid");i+="; Max-Age="+Math.floor(a)}if(o.domain){if(!F.test(o.domain))throw new TypeError("option domain is invalid");i+="; Domain="+o.domain}if(o.path){if(!F.test(o.path))throw new TypeError("option path is invalid");i+="; Path="+o.path}if(o.expires){if("function"!=typeof o.expires.toUTCString)throw new TypeError("option expires is invalid");i+="; Expires="+o.expires.toUTCString()}o.httpOnly&&(i+="; HttpOnly");o.secure&&(i+="; Secure");if(o.sameSite){switch("string"==typeof o.sameSite?o.sameSite.toLowerCase():o.sameSite){case!0:i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"strict":i+="; SameSite=Strict";break;case"none":i+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return i},T=decodeURIComponent,V=encodeURIComponent,j=/; */,F=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function k(e,t){try{return t(e)}catch(t){return e}}function D(e,t){void 0===t&&(t={});var n=function(e){if(e&&"j"===e[0]&&":"===e[1])return e.substr(2);return e}(e);if(function(e,t){return void 0===t&&(t=!e||"{"!==e[0]&&"["!==e[0]&&'"'!==e[0]),!t}(n,t.doNotParse))try{return JSON.parse(n)}catch(e){}return e}var R=window&&window.__assign||function(){return(R=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},x=function(){function e(e,t){var n=this;this.changeListeners=[],this.HAS_DOCUMENT_COOKIE=!1,this.cookies=function(e,t){return"string"==typeof e?M(e,t):"object"==typeof e&&null!==e?e:{}}(e,t),new Promise((function(){n.HAS_DOCUMENT_COOKIE="object"==typeof document&&"string"==typeof document.cookie})).catch((function(){}))}return e.prototype._updateBrowserValues=function(e){this.HAS_DOCUMENT_COOKIE&&(this.cookies=M(document.cookie,e))},e.prototype._emitChange=function(e){for(var t=0;t<this.changeListeners.length;++t)this.changeListeners[t](e)},e.prototype.get=function(e,t,n){return void 0===t&&(t={}),this._updateBrowserValues(n),D(this.cookies[e],t)},e.prototype.getAll=function(e,t){void 0===e&&(e={}),this._updateBrowserValues(t);var n={};for(var o in this.cookies)n[o]=D(this.cookies[o],e);return n},e.prototype.set=function(e,t,n){var o;"object"==typeof t&&(t=JSON.stringify(t)),this.cookies=R(R({},this.cookies),((o={})[e]=t,o)),this.HAS_DOCUMENT_COOKIE&&(document.cookie=P(e,t,n)),this._emitChange({name:e,value:t,options:n})},e.prototype.remove=function(e,t){var n=t=R(R({},t),{expires:new Date(1970,1,1,0,0,1),maxAge:0});this.cookies=R({},this.cookies),delete this.cookies[e],this.HAS_DOCUMENT_COOKIE&&(document.cookie=P(e,"",n)),this._emitChange({name:e,value:void 0,options:t})},e.prototype.addChangeListener=function(e){this.changeListeners.push(e)},e.prototype.removeChangeListener=function(e){var t=this.changeListeners.indexOf(e);t>=0&&this.changeListeners.splice(t,1)},e}();const N="lmd_consent",B="lmd_gdpr_token",G=new x,U=["_iub_cs-93269042","_iub_cs-80722398","_iub_cs-54944164","_iub_cs-77576453","_iub_cs-22807009","_iub_cs-50541746"],$=()=>{let e=!1;return U.forEach((t=>{G.get(t)&&(e=t)})),e},H=()=>G,q=H(),Q=`${t(window.location.hostname)}`,K=p.abtests.variants||[];let z=!1;const J=n("gdpr_forceToken");if(J){const e=new Date;q.set(B,J,{path:"/",domain:Q,expires:new Date(e.setFullYear(e.getFullYear()+1)),secure:!0,sameSite:"none"})}const W=()=>{if(s("init abtest debug ðŸ›ðŸ›ðŸ›"),K.length>0){const e=n("gdpr_displayMode");let t=J;if(!1!==e){s(`abtest debug - detect gdprMode -> ${e}`),q.remove(N,{path:"/",domain:Q,secure:!0,sameSite:"none"}),t=0;const n=$();!1!==n&&q.remove(n,{path:"/",domain:Q,secure:!0,sameSite:"none"})}p.abtests.token=(e=>{let t=!1,n=q.get(B)||!1;if(s(`abtest debug - current token -> ${n}`),!1!==e&&(s(`abtest debug - force token to ${e}`),n=e),!1===n&&(t=Math.floor(100*Math.random()),n=t,s(`abtest debug - randon token given -> ${t}`)),!1!==t){const e=new Date;q.set(B,t,{path:"/",domain:Q,expires:new Date(e.setFullYear(e.getFullYear()+1)),secure:!0,sameSite:"none"})}return+n})(t),s(`abtest debug - is there variant matching ${p.abtests.token} ?`),K.forEach((e=>!1===z&&(s(`abtest debug - check variant ${e.key} with tokens ${e.tokens.toString()}`),e.tokens.indexOf(p.abtests.token)>-1&&(s(`abtest debug - find matching variant -> ${e.key}`),z=e),!0)))}!1!==z&&(p.displayMode=z.displayMode,p.setTemplate(z.tpl))};var Y="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function X(e){var t={exports:{}};return e(t,t.exports),t.exports}var Z,ee,te,ne,oe,re=X((function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.TCFCommand||(t.TCFCommand={})).PING="ping",n.GET_TC_DATA="getTCData",n.GET_IN_APP_TC_DATA="getInAppTCData",n.GET_VENDOR_LIST="getVendorList",n.ADD_EVENT_LISTENER="addEventListener",n.REMOVE_EVENT_LISTENER="removeEventListener"})),se=X((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(re)})),ie=X((function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.CmpStatus||(t.CmpStatus={})).STUB="stub",n.LOADING="loading",n.LOADED="loaded",n.ERROR="error"})),ae=X((function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.DisplayStatus||(t.DisplayStatus={})).VISIBLE="visible",n.HIDDEN="hidden",n.DISABLED="disabled"})),ce=X((function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.EventStatus||(t.EventStatus={})).TC_LOADED="tcloaded",n.CMP_UI_SHOWN="cmpuishown",n.USER_ACTION_COMPLETE="useractioncomplete"})),ue=X((function(e,t){function n(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),n(ie),n(ae),n(ce)})),pe=function(){function e(e,t,n,o){this.success=!0,Object.assign(this,{callback:e,listenerId:n,param:t,next:o});try{this.respond()}catch(e){this.invokeCallback(null)}}return e.prototype.invokeCallback=function(e){null!==e?"function"==typeof this.next?this.callback(this.next,e,!0):this.callback(e,!0):this.callback(e,!1)},e}(),le=Object.defineProperty({Command:pe},"__esModule",{value:!0}),de=Y&&Y.__extends||(Z=function(e,t){return(Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Z(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),fe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return de(t,e),t.prototype.respond=function(){this.throwIfParamInvalid(),this.invokeCallback(new Re.TCData(this.param,this.listenerId))},t.prototype.throwIfParamInvalid=function(){if(!(void 0===this.param||Array.isArray(this.param)&&this.param.every(Number.isInteger)))throw new Error("Invalid Parameter")},t}(le.Command),he=Object.defineProperty({GetTCDataCommand:fe},"__esModule",{value:!0}),me=function(){function e(){this.eventQueue=new Map,this.queueNumber=0}return e.prototype.add=function(e){return this.eventQueue.set(this.queueNumber,e),this.queueNumber++},e.prototype.remove=function(e){return this.eventQueue.delete(e)},e.prototype.exec=function(){this.eventQueue.forEach((function(e,t){new he.GetTCDataCommand(e.callback,e.param,t,e.next)}))},e.prototype.clear=function(){this.queueNumber=0,this.eventQueue.clear()},Object.defineProperty(e.prototype,"size",{get:function(){return this.eventQueue.size},enumerable:!0,configurable:!0}),e}(),ge=Object.defineProperty({EventListenerQueue:me},"__esModule",{value:!0}),ye=function(){function e(){}return e.reset=function(){delete this.cmpId,delete this.cmpVersion,delete this.eventStatus,delete this.gdprApplies,delete this.tcModel,delete this.tcString,delete this.tcfPolicyVersion,this.cmpStatus=ue.CmpStatus.LOADING,this.disabled=!1,this.displayStatus=ue.DisplayStatus.HIDDEN,this.eventQueue.clear()},e.apiVersion="2",e.eventQueue=new ge.EventListenerQueue,e.cmpStatus=ue.CmpStatus.LOADING,e.disabled=!1,e.displayStatus=ue.DisplayStatus.HIDDEN,e}(),ve=Object.defineProperty({CmpApiModel:ye},"__esModule",{value:!0}),be=function(){this.cmpId=ve.CmpApiModel.cmpId,this.cmpVersion=ve.CmpApiModel.cmpVersion,this.gdprApplies=ve.CmpApiModel.gdprApplies,this.tcfPolicyVersion=ve.CmpApiModel.tcfPolicyVersion},_e=Object.defineProperty({Response:be},"__esModule",{value:!0}),Ee=Y&&Y.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ce=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cmpStatus=ue.CmpStatus.ERROR,t}return Ee(t,e),t}(_e.Response),we=Object.defineProperty({Disabled:Ce},"__esModule",{value:!0}),Se=Y&&Y.__extends||(ee=function(e,t){return(ee=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}ee(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Oe=Y&&Y.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,s=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=s.next()).done;)i.push(o.value)}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return i},Le=Y&&Y.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Oe(arguments[t]));return e},Ie=function(e){function t(t,n){var o=e.call(this)||this;if(o.eventStatus=ve.CmpApiModel.eventStatus,o.cmpStatus=ve.CmpApiModel.cmpStatus,o.listenerId=n,ve.CmpApiModel.gdprApplies){var r=ve.CmpApiModel.tcModel;o.tcString=ve.CmpApiModel.tcString,o.isServiceSpecific=r.isServiceSpecific,o.useNonStandardStacks=r.useNonStandardStacks,o.purposeOneTreatment=r.purposeOneTreatment,o.publisherCC=r.publisherCountryCode,o.outOfBand={allowedVendors:o.createVectorField(r.vendorsAllowed,t),disclosedVendors:o.createVectorField(r.vendorsDisclosed,t)},o.purpose={consents:o.createVectorField(r.purposeConsents),legitimateInterests:o.createVectorField(r.purposeLegitimateInterests)},o.vendor={consents:o.createVectorField(r.vendorConsents,t),legitimateInterests:o.createVectorField(r.vendorLegitimateInterests,t)},o.specialFeatureOptins=o.createVectorField(r.specialFeatureOptins),o.publisher={consents:o.createVectorField(r.publisherConsents),legitimateInterests:o.createVectorField(r.publisherLegitimateInterests),customPurpose:{consents:o.createVectorField(r.publisherCustomConsents),legitimateInterests:o.createVectorField(r.publisherCustomLegitimateInterests)},restrictions:o.createRestrictions(r.publisherRestrictions)}}return o}return Se(t,e),t.prototype.createRestrictions=function(e){var t={};if(e.numRestrictions>0)for(var n=e.getMaxVendorId(),o=function(n){var o=n.toString();e.getRestrictions(n).forEach((function(e){var n=e.purposeId.toString();t[n]||(t[n]={}),t[n][o]=e.restrictionType}))},r=1;r<=n;r++)o(r);return t},t.prototype.createVectorField=function(e,t){return t?t.reduce((function(t,n){return t[n+""]=e.has(+n),t}),{}):Le(e).reduce((function(e,t){return e[t[0].toString(10)]=t[1],e}),{})},t}(_e.Response),Ae=Object.defineProperty({TCData:Ie},"__esModule",{value:!0}),Me=Y&&Y.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Pe=Y&&Y.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,s=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=s.next()).done;)i.push(o.value)}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return i},Te=Y&&Y.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Pe(arguments[t]));return e},Ve=function(e){function t(t){var n=e.call(this,t)||this;return delete n.outOfBand,n}return Me(t,e),t.prototype.createVectorField=function(e){return Te(e).reduce((function(e,t){return e+(t[1]?"1":"0")}),"")},t.prototype.createRestrictions=function(e){var t={};if(e.numRestrictions>0){var n=e.getMaxVendorId();e.getRestrictions().forEach((function(e){t[e.purposeId.toString()]="_".repeat(n)}));for(var o=function(n){var o=n+1;e.getRestrictions(o).forEach((function(e){var o=e.restrictionType.toString(),r=e.purposeId.toString(),s=t[r].substr(0,n),i=t[r].substr(n+1);t[r]=s+o+i}))},r=0;r<n;r++)o(r)}return t},t}(Ae.TCData),je=Object.defineProperty({InAppTCData:Ve},"__esModule",{value:!0}),Fe=Y&&Y.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ke=function(e){function t(){var t=e.call(this)||this;return t.cmpLoaded=!0,t.cmpStatus=ve.CmpApiModel.cmpStatus,t.displayStatus=ve.CmpApiModel.displayStatus,t.apiVersion=""+ve.CmpApiModel.apiVersion,ve.CmpApiModel.tcModel&&ve.CmpApiModel.tcModel.vendorListVersion&&(t.gvlVersion=+ve.CmpApiModel.tcModel.vendorListVersion),t}return Fe(t,e),t}(_e.Response),De=Object.defineProperty({Ping:ke},"__esModule",{value:!0}),Re=X((function(e,t){function n(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),n(we),n(je),n(De),n(_e),n(Ae)})),xe=Y&&Y.__extends||(te=function(e,t){return(te=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}te(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Ne=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return xe(t,e),t.prototype.respond=function(){this.invokeCallback(new Re.Ping)},t}(le.Command),Be=Object.defineProperty({PingCommand:Ne},"__esModule",{value:!0}),Ge=Y&&Y.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ue=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ge(t,e),t.prototype.respond=function(){this.throwIfParamInvalid(),this.invokeCallback(new Re.InAppTCData(this.param))},t}(he.GetTCDataCommand),$e=Object.defineProperty({GetInAppTCDataCommand:Ue},"__esModule",{value:!0}),He=Y&&Y.__extends||(ne=function(e,t){return(ne=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}ne(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),qe=function(e){function t(t){var n=e.call(this,t)||this;return n.name="DecodingError",n}return He(t,e),t}(Error),Qe=Object.defineProperty({DecodingError:qe},"__esModule",{value:!0}),Ke=Y&&Y.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ze=function(e){function t(t){var n=e.call(this,t)||this;return n.name="EncodingError",n}return Ke(t,e),t}(Error),Je=Object.defineProperty({EncodingError:ze},"__esModule",{value:!0}),We=Y&&Y.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ye=function(e){function t(t){var n=e.call(this,t)||this;return n.name="GVLError",n}return We(t,e),t}(Error),Xe=Object.defineProperty({GVLError:Ye},"__esModule",{value:!0}),Ze=Y&&Y.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),et=function(e){function t(t,n,o){void 0===o&&(o="");var r=e.call(this,"invalid value "+n+" passed for "+t+" "+o)||this;return r.name="TCModelError",r}return Ze(t,e),t}(Error),tt=Object.defineProperty({TCModelError:et},"__esModule",{value:!0}),nt=X((function(e,t){function n(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),n(Qe),n(Je),n(Xe),n(tt)})),ot=function(){function e(){}return e.encode=function(e){if(!/^[0-1]+$/.test(e))throw new nt.EncodingError("Invalid bitField");var t=e.length%this.LCM;e+=t?"0".repeat(this.LCM-t):"";for(var n="",o=0;o<e.length;o+=this.BASIS)n+=this.DICT[parseInt(e.substr(o,this.BASIS),2)];return n},e.decode=function(e){if(!/^[A-Za-z0-9\-_]+$/.test(e))throw new nt.DecodingError("Invalidly encoded Base64URL string");for(var t="",n=0;n<e.length;n++){var o=this.REVERSE_DICT.get(e[n]).toString(2);t+="0".repeat(this.BASIS-o.length)+o}return t},e.DICT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",e.REVERSE_DICT=new Map([["A",0],["B",1],["C",2],["D",3],["E",4],["F",5],["G",6],["H",7],["I",8],["J",9],["K",10],["L",11],["M",12],["N",13],["O",14],["P",15],["Q",16],["R",17],["S",18],["T",19],["U",20],["V",21],["W",22],["X",23],["Y",24],["Z",25],["a",26],["b",27],["c",28],["d",29],["e",30],["f",31],["g",32],["h",33],["i",34],["j",35],["k",36],["l",37],["m",38],["n",39],["o",40],["p",41],["q",42],["r",43],["s",44],["t",45],["u",46],["v",47],["w",48],["x",49],["y",50],["z",51],["0",52],["1",53],["2",54],["3",55],["4",56],["5",57],["6",58],["7",59],["8",60],["9",61],["-",62],["_",63]]),e.BASIS=6,e.LCM=24,e}(),rt=Object.defineProperty({Base64Url:ot},"__esModule",{value:!0}),st=Y&&Y.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},it=function(){function e(){}return e.prototype.clone=function(){var e=this,t=new this.constructor;return Object.keys(this).forEach((function(n){var o=e.deepClone(e[n]);void 0!==o&&(t[n]=o)})),t},e.prototype.deepClone=function(e){var t,n,o=typeof e;if("number"===o||"string"===o||"boolean"===o)return e;if(null!==e&&"object"===o){if("function"==typeof e.clone)return e.clone();if(e instanceof Date)return new Date(e.getTime());if(void 0!==e[Symbol.iterator]){var r=[];try{for(var s=st(e),i=s.next();!i.done;i=s.next()){var a=i.value;r.push(this.deepClone(a))}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return e instanceof Array?r:new e.constructor(r)}var c={};for(var u in e)e.hasOwnProperty(u)&&(c[u]=this.deepClone(e[u]));return c}},e}(),at=Object.defineProperty({Cloneable:it},"__esModule",{value:!0}),ct=Y&&Y.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ut=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.root=null,t}return ct(t,e),t.prototype.isEmpty=function(){return!this.root},t.prototype.add=function(e){var t,n={value:e,left:null,right:null};if(this.isEmpty())this.root=n;else for(t=this.root;;)if(e<t.value){if(null===t.left){t.left=n;break}t=t.left}else{if(!(e>t.value))break;if(null===t.right){t.right=n;break}t=t.right}},t.prototype.get=function(){for(var e=[],t=this.root;t;)if(t.left){for(var n=t.left;n.right&&n.right!=t;)n=n.right;n.right==t?(n.right=null,e.push(t.value),t=t.right):(n.right=t,t=t.left)}else e.push(t.value),t=t.right;return e},t.prototype.contains=function(e){for(var t=!1,n=this.root;n;){if(n.value===e){t=!0;break}e>n.value?n=n.right:e<n.value&&(n=n.left)}return t},t.prototype.min=function(e){var t;for(void 0===e&&(e=this.root);e;)e.left?e=e.left:(t=e.value,e=null);return t},t.prototype.max=function(e){var t;for(void 0===e&&(e=this.root);e;)e.right?e=e.right:(t=e.value,e=null);return t},t.prototype.remove=function(e,t){void 0===t&&(t=this.root);for(var n=null,o="left";t;)if(e<t.value)n=t,t=t.left,o="left";else if(e>t.value)n=t,t=t.right,o="right";else{if(t.left||t.right)if(t.left)if(t.right){var r=this.min(t.right);this.remove(r,t.right),t.value=r}else n?n[o]=t.left:this.root=t.left;else n?n[o]=t.right:this.root=t.right;else n?n[o]=null:this.root=null;t=null}},t}(at.Cloneable),pt=Object.defineProperty({BinarySearchTree:ut},"__esModule",{value:!0}),lt=function(){function e(){}return e.prototype.has=function(t){return e.langSet.has(t)},e.prototype.forEach=function(t){e.langSet.forEach(t)},Object.defineProperty(e.prototype,"size",{get:function(){return e.langSet.size},enumerable:!0,configurable:!0}),e.langSet=new Set(["BG","CA","CS","DA","DE","EL","EN","ES","ET","FI","FR","HR","HU","IT","JA","LT","LV","MT","NL","NO","PL","PT","RO","RU","SK","SL","SV","TR","ZH"]),e}(),dt=Object.defineProperty({ConsentLanguages:lt},"__esModule",{value:!0}),ft=function(){function e(){}return e.cmpId="cmpId",e.cmpVersion="cmpVersion",e.consentLanguage="consentLanguage",e.consentScreen="consentScreen",e.created="created",e.supportOOB="supportOOB",e.isServiceSpecific="isServiceSpecific",e.lastUpdated="lastUpdated",e.numCustomPurposes="numCustomPurposes",e.policyVersion="policyVersion",e.publisherCountryCode="publisherCountryCode",e.publisherCustomConsents="publisherCustomConsents",e.publisherCustomLegitimateInterests="publisherCustomLegitimateInterests",e.publisherLegitimateInterests="publisherLegitimateInterests",e.publisherConsents="publisherConsents",e.publisherRestrictions="publisherRestrictions",e.purposeConsents="purposeConsents",e.purposeLegitimateInterests="purposeLegitimateInterests",e.purposeOneTreatment="purposeOneTreatment",e.specialFeatureOptins="specialFeatureOptins",e.useNonStandardStacks="useNonStandardStacks",e.vendorConsents="vendorConsents",e.vendorLegitimateInterests="vendorLegitimateInterests",e.vendorListVersion="vendorListVersion",e.vendorsAllowed="vendorsAllowed",e.vendorsDisclosed="vendorsDisclosed",e.version="version",e}(),ht=Object.defineProperty({Fields:ft},"__esModule",{value:!0}),mt=X((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.NOT_ALLOWED=0]="NOT_ALLOWED",e[e.REQUIRE_CONSENT=1]="REQUIRE_CONSENT",e[e.REQUIRE_LI=2]="REQUIRE_LI"}(t.RestrictionType||(t.RestrictionType={}))})),gt=Y&&Y.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),yt=function(e){function t(t,n){var o=e.call(this)||this;return void 0!==t&&(o.purposeId=t),void 0!==n&&(o.restrictionType=n),o}return gt(t,e),t.unHash=function(e){var n=e.split(this.hashSeparator),o=new t;if(2!==n.length)throw new nt.TCModelError("hash",e);return o.purposeId=parseInt(n[0],10),o.restrictionType=parseInt(n[1],10),o},Object.defineProperty(t.prototype,"hash",{get:function(){if(!this.isValid())throw new Error("cannot hash invalid PurposeRestriction");return""+this.purposeId+t.hashSeparator+this.restrictionType},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"purposeId",{get:function(){return this.purposeId_},set:function(e){this.purposeId_=e},enumerable:!0,configurable:!0}),t.prototype.isValid=function(){return Number.isInteger(this.purposeId)&&this.purposeId>0&&(this.restrictionType===mt.RestrictionType.NOT_ALLOWED||this.restrictionType===mt.RestrictionType.REQUIRE_CONSENT||this.restrictionType===mt.RestrictionType.REQUIRE_LI)},t.prototype.isSameAs=function(e){return this.purposeId===e.purposeId&&this.restrictionType===e.restrictionType},t.hashSeparator="-",t}(at.Cloneable),vt=Object.defineProperty({PurposeRestriction:yt},"__esModule",{value:!0}),bt=Y&&Y.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),_t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bitLength=0,t.map=new Map,t}return bt(t,e),t.prototype.has=function(e){return this.map.has(e)},t.prototype.isOkToHave=function(e,t,n){var o,r=!0;if(null===(o=this.gvl)||void 0===o?void 0:o.vendors){var s=this.gvl.vendors[n];if(s)if(e===mt.RestrictionType.NOT_ALLOWED)r=s.legIntPurposes.includes(t)||s.purposes.includes(t);else if(s.flexiblePurposes.length)switch(e){case mt.RestrictionType.REQUIRE_CONSENT:r=s.flexiblePurposes.includes(t)&&s.legIntPurposes.includes(t);break;case mt.RestrictionType.REQUIRE_LI:r=s.flexiblePurposes.includes(t)&&s.purposes.includes(t)}else r=!1;else r=!1}return r},t.prototype.add=function(e,t){if(this.isOkToHave(t.restrictionType,t.purposeId,e)){var n=t.hash;this.has(n)||(this.map.set(n,new pt.BinarySearchTree),this.bitLength=0),this.map.get(n).add(e)}},t.prototype.getVendors=function(e){var t=[];if(e){var n=e.hash;this.has(n)&&(t=this.map.get(n).get())}else{var o=new Set;this.map.forEach((function(e){e.get().forEach((function(e){o.add(e)}))})),t=Array.from(o)}return t},t.prototype.getRestrictionType=function(e,t){var n;return this.getRestrictions(e).forEach((function(e){e.purposeId===t&&(void 0===n||n>e.restrictionType)&&(n=e.restrictionType)})),n},t.prototype.vendorHasRestriction=function(e,t){for(var n=!1,o=this.getRestrictions(e),r=0;r<o.length&&!n;r++)n=t.isSameAs(o[r]);return n},t.prototype.getMaxVendorId=function(){var e=0;return this.map.forEach((function(t){e=Math.max(t.max(),e)})),e},t.prototype.getRestrictions=function(e){var t=[];return this.map.forEach((function(n,o){e?n.contains(e)&&t.push(vt.PurposeRestriction.unHash(o)):t.push(vt.PurposeRestriction.unHash(o))})),t},t.prototype.getPurposes=function(){var e=new Set;return this.map.forEach((function(t,n){e.add(vt.PurposeRestriction.unHash(n).purposeId)})),Array.from(e)},t.prototype.remove=function(e,t){var n=t.hash,o=this.map.get(n);o&&(o.remove(e),o.isEmpty()&&(this.map.delete(n),this.bitLength=0))},Object.defineProperty(t.prototype,"gvl",{get:function(){return this.gvl_},set:function(e){var t=this;this.gvl_||(this.gvl_=e,this.map.forEach((function(e,n){var o=vt.PurposeRestriction.unHash(n);e.get().forEach((function(n){t.isOkToHave(o.restrictionType,o.purposeId,n)||e.remove(n)}))})))},enumerable:!0,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.map.size},Object.defineProperty(t.prototype,"numRestrictions",{get:function(){return this.map.size},enumerable:!0,configurable:!0}),t}(at.Cloneable),Et=Object.defineProperty({PurposeRestrictionVector:_t},"__esModule",{value:!0}),Ct=X((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.CORE="core",e.VENDORS_DISCLOSED="vendorsDisclosed",e.VENDORS_ALLOWED="vendorsAllowed",e.PUBLISHER_TC="publisherTC"}(t.Segment||(t.Segment={}))})),wt=function(){function e(){}return e.ID_TO_KEY=[Ct.Segment.CORE,Ct.Segment.VENDORS_DISCLOSED,Ct.Segment.VENDORS_ALLOWED,Ct.Segment.PUBLISHER_TC],e.KEY_TO_ID=((oe={})[Ct.Segment.CORE]=0,oe[Ct.Segment.VENDORS_DISCLOSED]=1,oe[Ct.Segment.VENDORS_ALLOWED]=2,oe[Ct.Segment.PUBLISHER_TC]=3,oe),e}(),St=Object.defineProperty({SegmentIDs:wt},"__esModule",{value:!0}),Ot=Y&&Y.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Lt=Y&&Y.__generator||function(e,t){var n,o,r,s,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,o=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){i.label=s[1];break}if(6===s[0]&&i.label<r[1]){i.label=r[1],r=s;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(s);break}r[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},It=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bitLength=0,t.maxId_=0,t.set_=new Set,t}return Ot(t,e),t.prototype[Symbol.iterator]=function(){var e;return Lt(this,(function(t){switch(t.label){case 0:e=1,t.label=1;case 1:return e<=this.maxId?[4,[e,this.has(e)]]:[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}}))},t.prototype.values=function(){return this.set_.values()},Object.defineProperty(t.prototype,"maxId",{get:function(){return this.maxId_},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this.set_.has(e)},t.prototype.unset=function(e){var t=this;Array.isArray(e)?e.forEach((function(e){return t.unset(e)})):"object"==typeof e?this.unset(Object.keys(e).map((function(e){return+e}))):(this.set_.delete(e),this.bitLength=0,e===this.maxId&&(this.maxId_=0,this.set_.forEach((function(e){t.maxId_=Math.max(t.maxId,e)}))))},t.prototype.isIntMap=function(e){var t=this,n="object"==typeof e;return n&&Object.keys(e).every((function(n){var o=Number.isInteger(parseInt(n,10));return(o=o&&t.isValidNumber(e[n].id))&&void 0!==e[n].name}))},t.prototype.isValidNumber=function(e){return parseInt(e,10)>0},t.prototype.isSet=function(e){var t=!1;return e instanceof Set&&(t=Array.from(e).every(this.isValidNumber)),t},t.prototype.set=function(e){var t=this;if(Array.isArray(e))e.forEach((function(e){return t.set(e)}));else if(this.isSet(e))this.set(Array.from(e));else if(this.isIntMap(e))this.set(Object.keys(e).map((function(e){return+e})));else{if(!this.isValidNumber(e))throw new nt.TCModelError("set()",e,"must be positive integer array, positive integer, Set<number>, or IntMap");this.set_.add(e),this.maxId_=Math.max(this.maxId,e),this.bitLength=0}},t.prototype.empty=function(){this.set_=new Set},t.prototype.forEach=function(e){for(var t=1;t<=this.maxId;t++)e(this.has(t),t)},Object.defineProperty(t.prototype,"size",{get:function(){return this.set_.size},enumerable:!0,configurable:!0}),t.prototype.setAll=function(e){this.set(e)},t}(at.Cloneable),At=Object.defineProperty({Vector:It},"__esModule",{value:!0}),Mt=X((function(e,t){function n(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),n(pt),n(dt),n(ht),n(vt),n(Et),n(mt),n(Ct),n(St),n(At)})),Pt=function(){function e(){}var t,n,o,r,s,i,a,c,u,p,l,d,f,h,m,g,y,v;return t=Mt.Fields.cmpId,n=Mt.Fields.cmpVersion,o=Mt.Fields.consentLanguage,r=Mt.Fields.consentScreen,s=Mt.Fields.created,i=Mt.Fields.isServiceSpecific,a=Mt.Fields.lastUpdated,c=Mt.Fields.policyVersion,u=Mt.Fields.publisherCountryCode,p=Mt.Fields.publisherLegitimateInterests,l=Mt.Fields.publisherConsents,d=Mt.Fields.purposeConsents,f=Mt.Fields.purposeLegitimateInterests,h=Mt.Fields.purposeOneTreatment,m=Mt.Fields.specialFeatureOptins,g=Mt.Fields.useNonStandardStacks,y=Mt.Fields.vendorListVersion,v=Mt.Fields.version,e[t]=12,e[n]=12,e[o]=12,e[r]=6,e[s]=36,e[i]=1,e[a]=36,e[c]=6,e[u]=12,e[p]=24,e[l]=24,e[d]=24,e[f]=24,e[h]=1,e[m]=12,e[g]=1,e[y]=12,e[v]=6,e.anyBoolean=1,e.encodingType=1,e.maxId=16,e.numCustomPurposes=6,e.numEntries=12,e.numRestrictions=12,e.purposeId=6,e.restrictionType=2,e.segmentType=3,e.singleOrRange=1,e.vendorId=16,e}(),Tt=Object.defineProperty({BitLength:Pt},"__esModule",{value:!0}),Vt=function(){function e(){}return e.encode=function(e){return+e+""},e.decode=function(e){return"1"===e},e}(),jt=Object.defineProperty({BooleanEncoder:Vt},"__esModule",{value:!0}),Ft=function(){function e(){}return e.encode=function(e,t){var n;if("string"==typeof e&&(e=parseInt(e,10)),(n=e.toString(2)).length>t||e<0)throw new nt.EncodingError(e+" too large to encode into "+t);return n.length<t&&(n="0".repeat(t-n.length)+n),n},e.decode=function(e,t){if(t!==e.length)throw new nt.DecodingError("invalid bit length");return parseInt(e,2)},e}(),kt=Object.defineProperty({IntEncoder:Ft},"__esModule",{value:!0}),Dt=function(){function e(){}return e.encode=function(e,t){return kt.IntEncoder.encode(Math.round(e.getTime()/100),t)},e.decode=function(e,t){if(t!==e.length)throw new nt.DecodingError("invalid bit length");var n=new Date;return n.setTime(100*kt.IntEncoder.decode(e,t)),n},e}(),Rt=Object.defineProperty({DateEncoder:Dt},"__esModule",{value:!0}),xt=function(){function e(){}return e.encode=function(e,t){for(var n="",o=1;o<=t;o++)n+=jt.BooleanEncoder.encode(e.has(o));return n},e.decode=function(e,t){if(e.length!==t)throw new nt.DecodingError("bitfield encoding length mismatch");for(var n=new Mt.Vector,o=1;o<=t;o++)jt.BooleanEncoder.decode(e[o-1])&&n.set(o);return n.bitLength=e.length,n},e}(),Nt=Object.defineProperty({FixedVectorEncoder:xt},"__esModule",{value:!0}),Bt=function(){function e(){}return e.encode=function(e,t){var n=(e=e.toUpperCase()).charCodeAt(0)-65,o=e.charCodeAt(1)-65;if(n<0||n>25||o<0||o>25)throw new nt.EncodingError("invalid language code: "+e);if(t%2==1)throw new nt.EncodingError("numBits must be even, "+t+" is not valid");return t/=2,kt.IntEncoder.encode(n,t)+kt.IntEncoder.encode(o,t)},e.decode=function(e,t){if(t!==e.length||e.length%2)throw new nt.DecodingError("invalid bit length for language");var n=e.length/2,o=kt.IntEncoder.decode(e.slice(0,n),n)+65,r=kt.IntEncoder.decode(e.slice(n),n)+65;return String.fromCharCode(o)+String.fromCharCode(r)},e}(),Gt=Object.defineProperty({LangEncoder:Bt},"__esModule",{value:!0}),Ut=function(){function e(){}return e.encode=function(e){var t=kt.IntEncoder.encode(e.numRestrictions,Tt.BitLength.numRestrictions);return e.isEmpty()||e.getRestrictions().forEach((function(n){t+=kt.IntEncoder.encode(n.purposeId,Tt.BitLength.purposeId),t+=kt.IntEncoder.encode(n.restrictionType,Tt.BitLength.restrictionType);for(var o=e.getVendors(n),r=o.length,s=0,i=0,a="",c=0;c<r;c++){var u=o[c];if(0===i&&(s++,i=u),c===r-1||o[c+1]>u+1){var p=!(u===i);a+=jt.BooleanEncoder.encode(p),a+=kt.IntEncoder.encode(i,Tt.BitLength.vendorId),p&&(a+=kt.IntEncoder.encode(u,Tt.BitLength.vendorId)),i=0}}t+=kt.IntEncoder.encode(s,Tt.BitLength.numEntries),t+=a})),t},e.decode=function(e){var t=0,n=new Mt.PurposeRestrictionVector,o=kt.IntEncoder.decode(e.substr(t,Tt.BitLength.numRestrictions),Tt.BitLength.numRestrictions);t+=Tt.BitLength.numRestrictions;for(var r=0;r<o;r++){var s=kt.IntEncoder.decode(e.substr(t,Tt.BitLength.purposeId),Tt.BitLength.purposeId);t+=Tt.BitLength.purposeId;var i=kt.IntEncoder.decode(e.substr(t,Tt.BitLength.restrictionType),Tt.BitLength.restrictionType);t+=Tt.BitLength.restrictionType;var a=new Mt.PurposeRestriction(s,i),c=kt.IntEncoder.decode(e.substr(t,Tt.BitLength.numEntries),Tt.BitLength.numEntries);t+=Tt.BitLength.numEntries;for(var u=0;u<c;u++){var p=jt.BooleanEncoder.decode(e.substr(t,Tt.BitLength.anyBoolean));t+=Tt.BitLength.anyBoolean;var l=kt.IntEncoder.decode(e.substr(t,Tt.BitLength.vendorId),Tt.BitLength.vendorId);if(t+=Tt.BitLength.vendorId,p){var d=kt.IntEncoder.decode(e.substr(t,Tt.BitLength.vendorId),Tt.BitLength.vendorId);if(t+=Tt.BitLength.vendorId,d<l)throw new nt.DecodingError("Invalid RangeEntry: endVendorId "+d+" is less than "+l);for(var f=l;f<=d;f++)n.add(f,a)}else n.add(l,a)}}return n.bitLength=t,n},e}(),$t=Object.defineProperty({PurposeRestrictionVectorEncoder:Ut},"__esModule",{value:!0}),Ht=X((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.FIELD=0]="FIELD",e[e.RANGE=1]="RANGE"}(t.VectorEncodingType||(t.VectorEncodingType={}))})),qt=function(){function e(){}return e.encode=function(e){var t,n=[],o=[],r=kt.IntEncoder.encode(e.maxId,sn.BitLength.maxId),s="",i=sn.BitLength.maxId+sn.BitLength.encodingType,a=i+e.maxId,c=2*sn.BitLength.vendorId+sn.BitLength.singleOrRange+sn.BitLength.numEntries,u=i+sn.BitLength.numEntries;return e.forEach((function(r,i){s+=jt.BooleanEncoder.encode(r),(t=e.maxId>c&&u<a)&&r&&(e.has(i+1)?0===o.length&&(o.push(i),u+=sn.BitLength.singleOrRange,u+=sn.BitLength.vendorId):(o.push(i),u+=sn.BitLength.vendorId,n.push(o),o=[]))})),t?(r+=Ht.VectorEncodingType.RANGE+"",r+=this.buildRangeEncoding(n)):(r+=Ht.VectorEncodingType.FIELD+"",r+=s),r},e.decode=function(e,t){var n,o=0,r=kt.IntEncoder.decode(e.substr(o,sn.BitLength.maxId),sn.BitLength.maxId);o+=sn.BitLength.maxId;var s=kt.IntEncoder.decode(e.charAt(o),sn.BitLength.encodingType);if(o+=sn.BitLength.encodingType,s===Ht.VectorEncodingType.RANGE){if(n=new Mt.Vector,1===t){if("1"===e.substr(o,1))throw new nt.DecodingError("Unable to decode default consent=1");o++}var i=kt.IntEncoder.decode(e.substr(o,sn.BitLength.numEntries),sn.BitLength.numEntries);o+=sn.BitLength.numEntries;for(var a=0;a<i;a++){var c=jt.BooleanEncoder.decode(e.charAt(o));o+=sn.BitLength.singleOrRange;var u=kt.IntEncoder.decode(e.substr(o,sn.BitLength.vendorId),sn.BitLength.vendorId);if(o+=sn.BitLength.vendorId,c){var p=kt.IntEncoder.decode(e.substr(o,sn.BitLength.vendorId),sn.BitLength.vendorId);o+=sn.BitLength.vendorId;for(var l=u;l<=p;l++)n.set(l)}else n.set(u)}}else{var d=e.substr(o,r);o+=r,n=Nt.FixedVectorEncoder.decode(d,r)}return n.bitLength=o,n},e.buildRangeEncoding=function(e){var t=e.length,n=kt.IntEncoder.encode(t,sn.BitLength.numEntries);return e.forEach((function(e){var t=1===e.length;n+=jt.BooleanEncoder.encode(!t),n+=kt.IntEncoder.encode(e[0],sn.BitLength.vendorId),t||(n+=kt.IntEncoder.encode(e[1],sn.BitLength.vendorId))})),n},e}(),Qt=Object.defineProperty({VendorVectorEncoder:qt},"__esModule",{value:!0}),Kt=function(){function e(){}var t,n,o,r,s,i,a,c,u,p,l,d,f,h,m,g,y,v,b,_,E,C,w,S,O,L;return t=Mt.Fields.version,n=Mt.Fields.created,o=Mt.Fields.lastUpdated,r=Mt.Fields.cmpId,s=Mt.Fields.cmpVersion,i=Mt.Fields.consentScreen,a=Mt.Fields.consentLanguage,c=Mt.Fields.vendorListVersion,u=Mt.Fields.policyVersion,p=Mt.Fields.isServiceSpecific,l=Mt.Fields.useNonStandardStacks,d=Mt.Fields.specialFeatureOptins,f=Mt.Fields.purposeConsents,h=Mt.Fields.purposeLegitimateInterests,m=Mt.Fields.purposeOneTreatment,g=Mt.Fields.publisherCountryCode,y=Mt.Fields.vendorConsents,v=Mt.Fields.vendorLegitimateInterests,b=Mt.Fields.publisherRestrictions,_=Mt.Fields.vendorsDisclosed,E=Mt.Fields.vendorsAllowed,C=Mt.Fields.publisherConsents,w=Mt.Fields.publisherLegitimateInterests,S=Mt.Fields.numCustomPurposes,O=Mt.Fields.publisherCustomConsents,L=Mt.Fields.publisherCustomLegitimateInterests,e[t]=kt.IntEncoder,e[n]=Rt.DateEncoder,e[o]=Rt.DateEncoder,e[r]=kt.IntEncoder,e[s]=kt.IntEncoder,e[i]=kt.IntEncoder,e[a]=Gt.LangEncoder,e[c]=kt.IntEncoder,e[u]=kt.IntEncoder,e[p]=jt.BooleanEncoder,e[l]=jt.BooleanEncoder,e[d]=Nt.FixedVectorEncoder,e[f]=Nt.FixedVectorEncoder,e[h]=Nt.FixedVectorEncoder,e[m]=jt.BooleanEncoder,e[g]=Gt.LangEncoder,e[y]=Qt.VendorVectorEncoder,e[v]=Qt.VendorVectorEncoder,e[b]=$t.PurposeRestrictionVectorEncoder,e.segmentType=kt.IntEncoder,e[_]=Qt.VendorVectorEncoder,e[E]=Qt.VendorVectorEncoder,e[C]=Nt.FixedVectorEncoder,e[w]=Nt.FixedVectorEncoder,e[S]=kt.IntEncoder,e[O]=Nt.FixedVectorEncoder,e[L]=Nt.FixedVectorEncoder,e}(),zt=Object.defineProperty({FieldEncoderMap:Kt},"__esModule",{value:!0}),Jt=X((function(e,t){function n(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),n(jt),n(Rt),n(zt),n(Nt),n(kt),n(Gt),n($t),n(Ht),n(Qt)})),Wt=function(){var e,t;this[1]=((e={})[Mt.Segment.CORE]=[Mt.Fields.version,Mt.Fields.created,Mt.Fields.lastUpdated,Mt.Fields.cmpId,Mt.Fields.cmpVersion,Mt.Fields.consentScreen,Mt.Fields.consentLanguage,Mt.Fields.vendorListVersion,Mt.Fields.purposeConsents,Mt.Fields.vendorConsents],e),this[2]=((t={})[Mt.Segment.CORE]=[Mt.Fields.version,Mt.Fields.created,Mt.Fields.lastUpdated,Mt.Fields.cmpId,Mt.Fields.cmpVersion,Mt.Fields.consentScreen,Mt.Fields.consentLanguage,Mt.Fields.vendorListVersion,Mt.Fields.policyVersion,Mt.Fields.isServiceSpecific,Mt.Fields.useNonStandardStacks,Mt.Fields.specialFeatureOptins,Mt.Fields.purposeConsents,Mt.Fields.purposeLegitimateInterests,Mt.Fields.purposeOneTreatment,Mt.Fields.publisherCountryCode,Mt.Fields.vendorConsents,Mt.Fields.vendorLegitimateInterests,Mt.Fields.publisherRestrictions],t[Mt.Segment.PUBLISHER_TC]=[Mt.Fields.publisherConsents,Mt.Fields.publisherLegitimateInterests,Mt.Fields.numCustomPurposes,Mt.Fields.publisherCustomConsents,Mt.Fields.publisherCustomLegitimateInterests],t[Mt.Segment.VENDORS_ALLOWED]=[Mt.Fields.vendorsAllowed],t[Mt.Segment.VENDORS_DISCLOSED]=[Mt.Fields.vendorsDisclosed],t)},Yt=Object.defineProperty({FieldSequence:Wt},"__esModule",{value:!0}),Xt=function(e,t){if(this[1]=[Mt.Segment.CORE],this[2]=[Mt.Segment.CORE],2===e.version)if(e.isServiceSpecific)this[2].push(Mt.Segment.PUBLISHER_TC);else{var n=!(!t||!t.isForVendors);n&&!0!==e[Mt.Fields.supportOOB]||this[2].push(Mt.Segment.VENDORS_DISCLOSED),n&&(e[Mt.Fields.supportOOB]&&e[Mt.Fields.vendorsAllowed].size>0&&this[2].push(Mt.Segment.VENDORS_ALLOWED),this[2].push(Mt.Segment.PUBLISHER_TC))}},Zt=Object.defineProperty({SegmentSequence:Xt},"__esModule",{value:!0}),en=X((function(e,t){function n(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),n(Yt),n(Zt)})),tn=function(){function e(){}return e.encode=function(e,t){var n,o=this;try{n=this.fieldSequence[""+e.version][t]}catch(n){throw new nt.EncodingError("Unable to encode version: "+e.version+", segment: "+t)}var r="";return t!==Mt.Segment.CORE&&(r=Jt.IntEncoder.encode(Mt.SegmentIDs.KEY_TO_ID[t],Tt.BitLength.segmentType)),n.forEach((function(n){var s=e[n],i=Jt.FieldEncoderMap[n],a=Tt.BitLength[n];void 0===a&&o.isPublisherCustom(n)&&(a=+e[ht.Fields.numCustomPurposes]);try{r+=i.encode(s,a)}catch(e){throw new nt.EncodingError("Error encoding "+t+"->"+n+": "+e.message)}})),rt.Base64Url.encode(r)},e.decode=function(e,t,n){var o=this,r=rt.Base64Url.decode(e),s=0;return n===Mt.Segment.CORE&&(t.version=Jt.IntEncoder.decode(r.substr(s,Tt.BitLength[ht.Fields.version]),Tt.BitLength[ht.Fields.version])),n!==Mt.Segment.CORE&&(s+=Tt.BitLength.segmentType),this.fieldSequence[""+t.version][n].forEach((function(e){var n=Jt.FieldEncoderMap[e],i=Tt.BitLength[e];if(void 0===i&&o.isPublisherCustom(e)&&(i=+t[ht.Fields.numCustomPurposes]),0!==i){var a=r.substr(s,i);if(n===Jt.VendorVectorEncoder?t[e]=n.decode(a,t.version):t[e]=n.decode(a,i),Number.isInteger(i))s+=i;else{if(!Number.isInteger(t[e].bitLength))throw new nt.DecodingError(e);s+=t[e].bitLength}}})),t},e.isPublisherCustom=function(e){return 0===e.indexOf("publisherCustom")},e.fieldSequence=new en.FieldSequence,e}(),nn=Object.defineProperty({SegmentEncoder:tn},"__esModule",{value:!0}),on=function(){function e(){}return e.process=function(e,t){var n,o,r=e.gvl;if(!r)throw new nt.EncodingError("Unable to encode TCModel without a GVL");if(!r.isReady)throw new nt.EncodingError("Unable to encode TCModel tcModel.gvl.readyPromise is not resolved");(e=e.clone()).consentLanguage=r.language.toUpperCase(),(null===(n=t)||void 0===n?void 0:n.version)>0&&(null===(o=t)||void 0===o?void 0:o.version)<=this.processor.length?e.version=t.version:e.version=this.processor.length;var s=e.version-1;if(!this.processor[s])throw new nt.EncodingError("Invalid version: "+e.version);return this.processor[s](e,r)},e.processor=[function(e){return e},function(e,t){e.publisherRestrictions.gvl=t,e.purposeLegitimateInterests.unset(1);var n=new Map;return n.set("legIntPurposes",e.vendorLegitimateInterests),n.set("purposes",e.vendorConsents),n.forEach((function(n,o){n.forEach((function(r,s){if(r){var i=t.vendors[s];if(!i||i.deletedDate)n.unset(s);else if(0===i[o].length)if(e.isServiceSpecific)if(0===i.flexiblePurposes.length)n.unset(s);else{for(var a=e.publisherRestrictions.getRestrictions(s),c=!1,u=0,p=a.length;u<p&&!c;u++)c=a[u].restrictionType===Mt.RestrictionType.REQUIRE_CONSENT&&"purposes"===o||a[u].restrictionType===Mt.RestrictionType.REQUIRE_LI&&"legIntPurposes"===o;c||n.unset(s)}else n.unset(s)}}))})),e.vendorsDisclosed.set(t.vendors),e}],e}(),rn=Object.defineProperty({SemanticPreEncoder:on},"__esModule",{value:!0}),sn=X((function(e,t){function n(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),n(rt),n(Tt),n(nn),n(rn),n(Jt),n(en)})),an=function(){function e(){}return e.absCall=function(e,t,n,o){return new Promise((function(r,s){var i=new XMLHttpRequest;i.withCredentials=n,i.addEventListener("load",(function(){if(i.readyState==XMLHttpRequest.DONE)if(i.status>=200&&i.status<300){var e=i.response;if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}r(e)}else s(new Error("HTTP Status: "+i.status+" response type: "+i.responseType))})),i.addEventListener("error",(function(){s(new Error("error"))})),i.addEventListener("abort",(function(){s(new Error("aborted"))})),null===t?i.open("GET",e,!0):i.open("POST",e,!0),i.responseType="json",i.timeout=o,i.ontimeout=function(){s(new Error("Timeout "+o+"ms "+e))},i.send(t)}))},e.post=function(e,t,n,o){return void 0===n&&(n=!1),void 0===o&&(o=0),this.absCall(e,JSON.stringify(t),n,o)},e.fetch=function(e,t,n){return void 0===t&&(t=!1),void 0===n&&(n=0),this.absCall(e,null,t,n)},e}(),cn=Object.defineProperty({Json:an},"__esModule",{value:!0}),un=Y&&Y.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),pn=Y&&Y.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,s){function i(e){try{c(o.next(e))}catch(e){s(e)}}function a(e){try{c(o.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((o=o.apply(e,t||[])).next())}))},ln=Y&&Y.__generator||function(e,t){var n,o,r,s,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,o=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){i.label=s[1];break}if(6===s[0]&&i.label<r[1]){i.label=r[1],r=s;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(s);break}r[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},dn=function(e){function t(n){var o=e.call(this)||this;o.isReady_=!1,o.isLatest=!1;var r=t.baseUrl;if(o.lang_=t.DEFAULT_LANGUAGE,o.isVendorList(n))o.populate(n),o.readyPromise=Promise.resolve();else{if(!r)throw new nt.GVLError("must specify GVL.baseUrl before loading GVL json");if(n>0){var s=n;t.CACHE.has(s)?(o.populate(t.CACHE.get(s)),o.readyPromise=Promise.resolve()):(r+=t.versionedFilename.replace("[VERSION]",s+""),o.readyPromise=o.fetchJson(r))}else t.CACHE.has(t.LATEST_CACHE_KEY)?(o.populate(t.CACHE.get(t.LATEST_CACHE_KEY)),o.readyPromise=Promise.resolve()):(o.isLatest=!0,o.readyPromise=o.fetchJson(r+t.latestFilename))}return o}return un(t,e),Object.defineProperty(t,"baseUrl",{get:function(){return this.baseUrl_},set:function(e){if(/^https?:\/\/vendorlist\.consensu\.org\//.test(e))throw new nt.GVLError("Invalid baseUrl!  You may not pull directly from vendorlist.consensu.org and must provide your own cache");e.length>0&&"/"!==e[e.length-1]&&(e+="/"),this.baseUrl_=e},enumerable:!0,configurable:!0}),t.emptyLanguageCache=function(e){var n=!1;return void 0===e&&t.LANGUAGE_CACHE.size>0?(t.LANGUAGE_CACHE=new Map,n=!0):"string"==typeof e&&this.consentLanguages.has(e.toUpperCase())&&(t.LANGUAGE_CACHE.delete(e.toUpperCase()),n=!0),n},t.emptyCache=function(e){var n=!1;return Number.isInteger(e)&&e>=0?(t.CACHE.delete(e),n=!0):void 0===e&&(t.CACHE=new Map,n=!0),n},t.prototype.cacheLanguage=function(){t.LANGUAGE_CACHE.has(this.lang_)||t.LANGUAGE_CACHE.set(this.lang_,{purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks})},t.prototype.fetchJson=function(e){return pn(this,void 0,void 0,(function(){var t,n;return ln(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),t=this.populate,[4,cn.Json.fetch(e)];case 1:return t.apply(this,[o.sent()]),[3,3];case 2:throw n=o.sent(),new nt.GVLError(n.message);case 3:return[2]}}))}))},t.prototype.getJson=function(){return JSON.parse(JSON.stringify({gvlSpecificationVersion:this.gvlSpecificationVersion,vendorListVersion:this.vendorListVersion,tcfPolicyVersion:this.tcfPolicyVersion,lastUpdated:this.lastUpdated,purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks,vendors:this.fullVendorList}))},t.prototype.changeLanguage=function(e){return pn(this,void 0,void 0,(function(){var n,o,r,s,i;return ln(this,(function(a){switch(a.label){case 0:if(n=e.toUpperCase(),!t.consentLanguages.has(n))return[3,6];if(n===this.lang_)return[3,5];if(this.lang_=n,!t.LANGUAGE_CACHE.has(n))return[3,1];for(r in o=t.LANGUAGE_CACHE.get(n))o.hasOwnProperty(r)&&(this[r]=o[r]);return[3,5];case 1:s=t.baseUrl+t.languageFilename.replace("[LANG]",e),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,this.fetchJson(s)];case 3:return a.sent(),this.cacheLanguage(),[3,5];case 4:throw i=a.sent(),new nt.GVLError("unable to load language: "+i.message);case 5:return[3,7];case 6:throw new nt.GVLError("unsupported language "+e);case 7:return[2]}}))}))},Object.defineProperty(t.prototype,"language",{get:function(){return this.lang_},enumerable:!0,configurable:!0}),t.prototype.isVendorList=function(e){return void 0!==e&&void 0!==e.vendors},t.prototype.populate=function(e){this.purposes=e.purposes,this.specialPurposes=e.specialPurposes,this.features=e.features,this.specialFeatures=e.specialFeatures,this.stacks=e.stacks,this.isVendorList(e)&&(this.gvlSpecificationVersion=e.gvlSpecificationVersion,this.tcfPolicyVersion=e.tcfPolicyVersion,this.vendorListVersion=e.vendorListVersion,this.lastUpdated=e.lastUpdated,"string"==typeof this.lastUpdated&&(this.lastUpdated=new Date(this.lastUpdated)),this.vendors_=e.vendors,this.fullVendorList=e.vendors,this.mapVendors(),this.isReady_=!0,this.isLatest&&t.CACHE.set(t.LATEST_CACHE_KEY,this.getJson()),t.CACHE.has(this.vendorListVersion)||t.CACHE.set(this.vendorListVersion,this.getJson())),this.cacheLanguage()},t.prototype.mapVendors=function(e){var t=this;this.byPurposeVendorMap={},this.bySpecialPurposeVendorMap={},this.byFeatureVendorMap={},this.bySpecialFeatureVendorMap={},Object.keys(this.purposes).forEach((function(e){t.byPurposeVendorMap[e]={legInt:new Set,consent:new Set,flexible:new Set}})),Object.keys(this.specialPurposes).forEach((function(e){t.bySpecialPurposeVendorMap[e]=new Set})),Object.keys(this.features).forEach((function(e){t.byFeatureVendorMap[e]=new Set})),Object.keys(this.specialFeatures).forEach((function(e){t.bySpecialFeatureVendorMap[e]=new Set})),Array.isArray(e)||(e=Object.keys(this.fullVendorList).map((function(e){return+e}))),this.vendorIds=new Set(e),this.vendors_=e.reduce((function(e,n){var o=t.vendors_[""+n];return o&&void 0===o.deletedDate&&(o.purposes.forEach((function(e){t.byPurposeVendorMap[e+""].consent.add(n)})),o.specialPurposes.forEach((function(e){t.bySpecialPurposeVendorMap[e+""].add(n)})),o.legIntPurposes.forEach((function(e){t.byPurposeVendorMap[e+""].legInt.add(n)})),o.flexiblePurposes&&o.flexiblePurposes.forEach((function(e){t.byPurposeVendorMap[e+""].flexible.add(n)})),o.features.forEach((function(e){t.byFeatureVendorMap[e+""].add(n)})),o.specialFeatures.forEach((function(e){t.bySpecialFeatureVendorMap[e+""].add(n)})),e[n]=o),e}),{})},t.prototype.getFilteredVendors=function(e,t,n,o){var r=this,s=e.charAt(0).toUpperCase()+e.slice(1),i={};return("purpose"===e&&n?this["by"+s+"VendorMap"][t+""][n]:this["by"+(o?"Special":"")+s+"VendorMap"][t+""]).forEach((function(e){i[e+""]=r.vendors[e+""]})),i},t.prototype.getVendorsWithConsentPurpose=function(e){return this.getFilteredVendors("purpose",e,"consent")},t.prototype.getVendorsWithLegIntPurpose=function(e){return this.getFilteredVendors("purpose",e,"legInt")},t.prototype.getVendorsWithFlexiblePurpose=function(e){return this.getFilteredVendors("purpose",e,"flexible")},t.prototype.getVendorsWithSpecialPurpose=function(e){return this.getFilteredVendors("purpose",e,void 0,!0)},t.prototype.getVendorsWithFeature=function(e){return this.getFilteredVendors("feature",e)},t.prototype.getVendorsWithSpecialFeature=function(e){return this.getFilteredVendors("feature",e,void 0,!0)},Object.defineProperty(t.prototype,"vendors",{get:function(){return this.vendors_},enumerable:!0,configurable:!0}),t.prototype.narrowVendorsTo=function(e){this.mapVendors(e)},Object.defineProperty(t.prototype,"isReady",{get:function(){return this.isReady_},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new t(this.getJson())},t.isInstanceOf=function(e){return"object"==typeof e&&"function"==typeof e.narrowVendorsTo},t.LANGUAGE_CACHE=new Map,t.CACHE=new Map,t.LATEST_CACHE_KEY=0,t.DEFAULT_LANGUAGE="EN",t.consentLanguages=new Mt.ConsentLanguages,t.latestFilename="vendor-list.json",t.versionedFilename="archives/vendor-list-v[VERSION].json",t.languageFilename="purposes-[LANG].json",t}(at.Cloneable),fn=Object.defineProperty({GVL:dn},"__esModule",{value:!0}),hn=Y&&Y.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),mn=function(e){function t(t){var n=e.call(this)||this;return n.isServiceSpecific_=!1,n.supportOOB_=!0,n.useNonStandardStacks_=!1,n.purposeOneTreatment_=!1,n.publisherCountryCode_="AA",n.version_=2,n.consentScreen_=0,n.policyVersion_=2,n.consentLanguage_="EN",n.cmpId_=0,n.cmpVersion_=0,n.vendorListVersion_=0,n.numCustomPurposes_=0,n.specialFeatureOptins=new Mt.Vector,n.purposeConsents=new Mt.Vector,n.purposeLegitimateInterests=new Mt.Vector,n.publisherConsents=new Mt.Vector,n.publisherLegitimateInterests=new Mt.Vector,n.publisherCustomConsents=new Mt.Vector,n.publisherCustomLegitimateInterests=new Mt.Vector,n.vendorConsents=new Mt.Vector,n.vendorLegitimateInterests=new Mt.Vector,n.vendorsDisclosed=new Mt.Vector,n.vendorsAllowed=new Mt.Vector,n.publisherRestrictions=new Mt.PurposeRestrictionVector,t&&(n.gvl=t),n.created=new Date,n.updated(),n}return hn(t,e),Object.defineProperty(t.prototype,"gvl",{get:function(){return this.gvl_},set:function(e){fn.GVL.isInstanceOf(e)||(e=new fn.GVL(e)),this.gvl_=e,this.publisherRestrictions.gvl=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cmpId",{get:function(){return this.cmpId_},set:function(e){if(!(Number.isInteger(+e)&&e>1))throw new nt.TCModelError("cmpId",e);this.cmpId_=+e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cmpVersion",{get:function(){return this.cmpVersion_},set:function(e){if(!(Number.isInteger(+e)&&e>-1))throw new nt.TCModelError("cmpVersion",e);this.cmpVersion_=+e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"consentScreen",{get:function(){return this.consentScreen_},set:function(e){if(!(Number.isInteger(+e)&&e>-1))throw new nt.TCModelError("consentScreen",e);this.consentScreen_=+e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"consentLanguage",{get:function(){return this.consentLanguage_},set:function(e){this.consentLanguage_=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"publisherCountryCode",{get:function(){return this.publisherCountryCode_},set:function(e){if(!/^([A-z]){2}$/.test(e))throw new nt.TCModelError("publisherCountryCode",e);this.publisherCountryCode_=e.toUpperCase()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"vendorListVersion",{get:function(){return this.gvl?this.gvl.vendorListVersion:this.vendorListVersion_},set:function(e){if((e=+e>>0)<0)throw new nt.TCModelError("vendorListVersion",e);this.vendorListVersion_=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"policyVersion",{get:function(){return this.gvl?this.gvl.tcfPolicyVersion:this.policyVersion_},set:function(e){if(this.policyVersion_=parseInt(e,10),this.policyVersion_<0)throw new nt.TCModelError("policyVersion",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return this.version_},set:function(e){this.version_=parseInt(e,10)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isServiceSpecific",{get:function(){return this.isServiceSpecific_},set:function(e){this.isServiceSpecific_=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useNonStandardStacks",{get:function(){return this.useNonStandardStacks_},set:function(e){this.useNonStandardStacks_=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"supportOOB",{get:function(){return this.supportOOB_},set:function(e){this.supportOOB_=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"purposeOneTreatment",{get:function(){return this.purposeOneTreatment_},set:function(e){this.purposeOneTreatment_=e},enumerable:!0,configurable:!0}),t.prototype.setAllVendorConsents=function(){this.vendorConsents.set(this.gvl.vendors)},t.prototype.unsetAllVendorConsents=function(){this.vendorConsents.empty()},t.prototype.setAllVendorsDisclosed=function(){this.vendorsDisclosed.set(this.gvl.vendors)},t.prototype.unsetAllVendorsDisclosed=function(){this.vendorsDisclosed.empty()},t.prototype.setAllVendorsAllowed=function(){this.vendorsAllowed.set(this.gvl.vendors)},t.prototype.unsetAllVendorsAllowed=function(){this.vendorsAllowed.empty()},t.prototype.setAllVendorLegitimateInterests=function(){this.vendorLegitimateInterests.set(this.gvl.vendors)},t.prototype.unsetAllVendorLegitimateInterests=function(){this.vendorLegitimateInterests.empty()},t.prototype.setAllPurposeConsents=function(){this.purposeConsents.set(this.gvl.purposes)},t.prototype.unsetAllPurposeConsents=function(){this.purposeConsents.empty()},t.prototype.setAllPurposeLegitimateInterests=function(){this.purposeLegitimateInterests.set(this.gvl.purposes)},t.prototype.unsetAllPurposeLegitimateInterests=function(){this.purposeLegitimateInterests.empty()},t.prototype.setAllSpecialFeatureOptins=function(){this.specialFeatureOptins.set(this.gvl.specialFeatures)},t.prototype.unsetAllSpecialFeatureOptins=function(){this.specialFeatureOptins.empty()},t.prototype.setAll=function(){this.setAllVendorConsents(),this.setAllPurposeLegitimateInterests(),this.setAllSpecialFeatureOptins(),this.setAllPurposeConsents(),this.setAllVendorLegitimateInterests()},t.prototype.unsetAll=function(){this.unsetAllVendorConsents(),this.unsetAllPurposeLegitimateInterests(),this.unsetAllSpecialFeatureOptins(),this.unsetAllPurposeConsents(),this.unsetAllVendorLegitimateInterests()},Object.defineProperty(t.prototype,"numCustomPurposes",{get:function(){var e=this.numCustomPurposes_;if("object"==typeof this.customPurposes){var t=Object.keys(this.customPurposes).sort((function(e,t){return+e-+t}));e=parseInt(t.pop(),10)}return e},set:function(e){if(this.numCustomPurposes_=parseInt(e,10),this.numCustomPurposes_<0)throw new nt.TCModelError("numCustomPurposes",e)},enumerable:!0,configurable:!0}),t.prototype.updated=function(){this.lastUpdated=new Date},t.consentLanguages=fn.GVL.consentLanguages,t}(at.Cloneable),gn=Object.defineProperty({TCModel:mn},"__esModule",{value:!0}),yn=function(){function e(){}return e.encode=function(e,t){var n,o,r="";return e=sn.SemanticPreEncoder.process(e,t),(o=Array.isArray(null===(n=t)||void 0===n?void 0:n.segments)?t.segments:new sn.SegmentSequence(e,t)[""+e.version]).forEach((function(t,n){var s="";n<o.length-1&&(s="."),r+=sn.SegmentEncoder.encode(e,t)+s})),r},e.decode=function(e,t){var n=e.split("."),o=n.length;t||(t=new gn.TCModel);for(var r=0;r<o;r++){var s=n[r],i=sn.Base64Url.decode(s.charAt(0)).substr(0,sn.BitLength.segmentType),a=Mt.SegmentIDs.ID_TO_KEY[kt.IntEncoder.decode(i,sn.BitLength.segmentType).toString()];sn.SegmentEncoder.decode(s,t,a)}return t},e}(),vn=Object.defineProperty({TCString:yn},"__esModule",{value:!0}),bn=X((function(e,t){function n(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),n(sn),n(nt),n(Mt),n(at),n(fn),n(cn),n(gn),n(vn)})),_n=Y&&Y.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),En=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return _n(t,e),t.prototype.respond=function(){var e,t=this,n=ve.CmpApiModel.tcModel,o=n.vendorListVersion;void 0===this.param&&(this.param=o),(e=this.param===o&&n.gvl?n.gvl:new bn.GVL(this.param)).readyPromise.then((function(){t.invokeCallback(e.getJson())}))},t}(le.Command),Cn=Object.defineProperty({GetVendorListCommand:En},"__esModule",{value:!0}),wn=Y&&Y.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Sn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return wn(t,e),t.prototype.respond=function(){this.listenerId=ve.CmpApiModel.eventQueue.add({callback:this.callback,param:this.param,next:this.next}),e.prototype.respond.call(this)},t}(he.GetTCDataCommand),On=Object.defineProperty({AddEventListenerCommand:Sn},"__esModule",{value:!0}),Ln=Y&&Y.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),In=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ln(t,e),t.prototype.respond=function(){this.invokeCallback(ve.CmpApiModel.eventQueue.remove(this.param))},t}(le.Command),An=Object.defineProperty({RemoveEventListenerCommand:In},"__esModule",{value:!0}),Mn=function(){function e(){}var t,n,o,r,s,i;return t=re.TCFCommand.PING,n=re.TCFCommand.GET_TC_DATA,o=re.TCFCommand.GET_IN_APP_TC_DATA,r=re.TCFCommand.GET_VENDOR_LIST,s=re.TCFCommand.ADD_EVENT_LISTENER,i=re.TCFCommand.REMOVE_EVENT_LISTENER,e[t]=Be.PingCommand,e[n]=he.GetTCDataCommand,e[o]=$e.GetInAppTCDataCommand,e[r]=Cn.GetVendorListCommand,e[s]=On.AddEventListenerCommand,e[i]=An.RemoveEventListenerCommand,e}(),Pn=Object.defineProperty({CommandMap:Mn},"__esModule",{value:!0}),Tn=function(){function e(){}return e.has=function(e){return"string"==typeof e&&(e=+e),this.set_.has(e)},e.set_=new Set([0,2,void 0,null]),e}(),Vn=Object.defineProperty({SupportedVersions:Tn},"__esModule",{value:!0}),jn=X((function(e,t){var n=Y&&Y.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,s=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=s.next()).done;)i.push(o.value)}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return i},o=Y&&Y.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(n(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0}),t.API_KEY="__tcfapi";var r=function(){function e(e){var n,o;if(e){var r=se.TCFCommand.ADD_EVENT_LISTENER;if(null===(n=e)||void 0===n?void 0:n[r])throw new Error("Built-In Custom Commmand for "+r+" not allowed: Use "+se.TCFCommand.GET_TC_DATA+" instead");if(r=se.TCFCommand.REMOVE_EVENT_LISTENER,null===(o=e)||void 0===o?void 0:o[r])throw new Error("Built-In Custom Commmand for "+r+" not allowed");this.customCommands=e}try{this.callQueue=window[t.API_KEY]()||[]}catch(e){this.callQueue=[]}finally{window[t.API_KEY]=this.apiCall.bind(this),this.purgeQueuedCalls()}}return e.prototype.apiCall=function(e,t,n){for(var r,s=[],i=3;i<arguments.length;i++)s[i-3]=arguments[i];if("string"!=typeof e)n(null,!1);else if(Vn.SupportedVersions.has(t)){if("function"!=typeof n)throw new Error("invalid callback function");ve.CmpApiModel.disabled?n(new we.Disabled,!1):this.isCustomCommand(e)||this.isBuiltInCommand(e)?this.isCustomCommand(e)&&!this.isBuiltInCommand(e)?(r=this.customCommands)[e].apply(r,o([n],s)):e===se.TCFCommand.PING?this.isCustomCommand(e)?new Pn.CommandMap[e](this.customCommands[e],s[0],null,n):new Pn.CommandMap[e](n,s[0]):void 0===ve.CmpApiModel.tcModel?this.callQueue.push(o([e,t,n],s)):this.isCustomCommand(e)&&this.isBuiltInCommand(e)?new Pn.CommandMap[e](this.customCommands[e],s[0],null,n):new Pn.CommandMap[e](n,s[0]):n(null,!1)}else n(null,!1)},e.prototype.purgeQueuedCalls=function(){var e=this.callQueue;this.callQueue=[],e.forEach((function(e){window[t.API_KEY].apply(window,o(e))}))},e.prototype.isCustomCommand=function(e){return this.customCommands&&"function"==typeof this.customCommands[e]},e.prototype.isBuiltInCommand=function(e){return void 0!==Pn.CommandMap[e]},e}();t.CallResponder=r})),Fn=function(){function e(e,t,n,o){void 0===n&&(n=!1),this.numUpdates=0,this.throwIfInvalidInt(e,"cmpId",2),this.throwIfInvalidInt(t,"cmpVersion",0),ve.CmpApiModel.cmpId=e,ve.CmpApiModel.cmpVersion=t,this.isServiceSpecific=!!n,this.callResponder=new jn.CallResponder(o)}return e.prototype.throwIfInvalidInt=function(e,t,n){if(!("number"==typeof e&&Number.isInteger(e)&&e>=n))throw new Error("Invalid "+t+": "+e)},e.prototype.update=function(e,t){if(void 0===t&&(t=!1),ve.CmpApiModel.disabled)throw new Error("CmpApi Disabled");ve.CmpApiModel.cmpStatus=ue.CmpStatus.LOADED,t?(ve.CmpApiModel.displayStatus=ue.DisplayStatus.VISIBLE,ve.CmpApiModel.eventStatus=ue.EventStatus.CMP_UI_SHOWN):void 0===ve.CmpApiModel.tcModel?(ve.CmpApiModel.displayStatus=ue.DisplayStatus.DISABLED,ve.CmpApiModel.eventStatus=ue.EventStatus.TC_LOADED):(ve.CmpApiModel.displayStatus=ue.DisplayStatus.HIDDEN,ve.CmpApiModel.eventStatus=ue.EventStatus.USER_ACTION_COMPLETE),ve.CmpApiModel.gdprApplies=null!==e,ve.CmpApiModel.gdprApplies?(""===e?(ve.CmpApiModel.tcModel=new bn.TCModel,ve.CmpApiModel.tcModel.cmpId=ve.CmpApiModel.cmpId,ve.CmpApiModel.tcModel.cmpVersion=ve.CmpApiModel.cmpVersion):ve.CmpApiModel.tcModel=bn.TCString.decode(e),ve.CmpApiModel.tcModel.isServiceSpecific=this.isServiceSpecific,ve.CmpApiModel.tcfPolicyVersion=+ve.CmpApiModel.tcModel.policyVersion,ve.CmpApiModel.tcString=e):ve.CmpApiModel.tcModel=null,0===this.numUpdates?this.callResponder.purgeQueuedCalls():ve.CmpApiModel.eventQueue.exec(),this.numUpdates++},e.prototype.disable=function(){ve.CmpApiModel.disabled=!0,ve.CmpApiModel.cmpStatus=ue.CmpStatus.ERROR},e}(),kn=Object.defineProperty({CmpApi:Fn},"__esModule",{value:!0});const Dn=new(X((function(e,t){function n(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),n(se),n(Re),n(ue),n(kn),t.API_KEY=jn.API_KEY})).CmpApi)(371,1,!0),Rn=new Event("gdprConsentGiven"),xn=new Event("gdprConsentFirstGiven");var Nn=e=>{Rn.purposes=e,document.dispatchEvent(Rn)},Bn=e=>{xn.purposes=e,document.dispatchEvent(xn)};const Gn=(e,t)=>{if(null===document.querySelector(`style[data-gdpr-key="${e}"]`)){const n=document.createElement("style");n.setAttribute("data-gdpr-key",e),n.innerHTML=t,document.head.appendChild(n)}};const Un=e=>{if(!0===function(e){return"SCRIPT"===e.tagName}(e))e.parentNode.replaceChild(function(e){const t=document.createElement("script");t.text=e.innerHTML;let n=0;const o=e.attributes;let r;for(;n<o.length;)t.setAttribute((r=o[n]).name,r.value),n+=1;return t}(e),e);else{let t=0;const n=e.childNodes;for(;t<n.length;)Un(n[t]),t+=1}return e},$n=e=>{const t=(e=>{const t=document.createElement("div");return t.innerHTML=e.trim(),t.firstChild})(e);return document.body.appendChild(t),t},Hn=e=>{document.querySelectorAll(e).forEach((e=>{e.parentNode.removeChild(e)}))},qn=e=>{e?document.querySelectorAll("html,body").forEach((e=>{e.classList.add("popin-gdpr-no-scroll")})):document.querySelectorAll("html,body").forEach((e=>{e.classList.remove("popin-gdpr-no-scroll")}))},Qn=new x,Kn="lmd_consent",zn="euconsent-v2",Jn={analytics:!1,ads:!1,personalization:!1,mediaPlatforms:!1,social:!1},Wn={ads:5,analytics:2,personalization:4,mediaPlatforms:!1,social:3},Yn=()=>void 0!==p.consent&&void 0!==p.consent.lmdConsent?p.consent.lmdConsent:Qn.get(Kn),Xn=()=>void 0!==p.consent&&void 0!==p.consent.consentString?p.consent.consentString:Qn.get(zn),Zn=()=>!!Yn()&&!!Xn(),eo=()=>Zn()?Yn().purposes:Jn,to=()=>Zn()&&Yn().timestamp||!1,no=()=>{const e=to();if(e){const t=new Date(1e3*e);return`Le ${t.toLocaleDateString()} Ã  ${t.toLocaleTimeString()}`}return!1},oo=()=>Zn()&&Yn().userId||!1,ro=e=>{fetch(`https://${p.hosts.cmp}/api/consent`,{credentials:"include",method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({displayMode:p.displayMode,template:p.modules[p.displayMode].tpl,expression:"acceptAll"})}).then((e=>e.json())).then((t=>{Dn.update(t.consentString,!1),"function"==typeof e&&e(),ao(),Nn(eo()),Bn(eo())}))},so=e=>{fetch(`https://${p.hosts.cmp}/api/consent`,{credentials:"include",method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({displayMode:p.displayMode,template:p.modules[p.displayMode].tpl,expression:"denyAll"})}).then((e=>e.json())).then((t=>{Dn.update(t.consentString,!1),"function"==typeof e&&e(),ao(),Nn(eo()),Bn(eo())}))},io=(e,t)=>{e.hasAttribute(t)&&(e.setAttribute("type","text/javascript"),e.setAttribute("src",e.getAttribute(t)),e.removeAttribute(t))},ao=()=>{i("loadContent");const e=eo();e.essential=!0,"object"==typeof e&&Object.keys(e).forEach((t=>{!0===e[t]&&(e=>{if(e){const t=document.querySelectorAll(`[data-iub-purposes="${e}"]`);for(let e=0;e<t.length;e+=1)io(t[e],"data-suppressedsrc")}})(Wn[t]||!1);const n=document.querySelectorAll(`[data-gdpr-purposes="${t}"]`);let o,r;for(i(`Find ${n.length} node(s) for purpose ${t}`),o=0;o<n.length;o+=1)r=n[o],r.hasAttribute("data-gdpr-src")&&!0===e[t]&&io(r,"data-gdpr-src"),r.hasAttribute("data-gdpr-no-consent-src")&&!1===e[t]&&io(r,"data-gdpr-no-consent-src"),r.hasAttribute("data-gdpr-inline")&&!0===e[t]&&(r.setAttribute("type","application/javascript"),Un(r))}))},co=H(),uo={2:"analytics",3:"social",4:"personalization",5:"ads"},po={version:1,cmpId:371,displayMode:p.displayMode,purposes:{analytics:!1,ads:!1,personalization:!1,mediaPlatforms:!1,social:!1}},lo=()=>{const e=(()=>{let e=!1;const t=$();return G.get(t)&&(e=G.get(t)),e})();let t=!!co.get(N);const n=document.location.hostname.split(".").reverse().splice(0,2).reverse().join(".");if(t){const e=co.get(N);(e.categories||e.iabVersion)&&(co.remove(N,{path:"/",domain:`${n}`,secure:!0,sameSite:"none"}),t=!1)}if(!t&&e&&e.purposes){const t=new Date(e.timestamp),o={...po},{purposes:r}=e;Object.keys(r).forEach((e=>{uo[e]&&(o.purposes[uo[e]]=r[e])})),co.set(N,o,{path:"/",domain:`${n}`,expires:new Date(t.setFullYear(t.getFullYear()+1)),secure:!0,sameSite:"none"})}},fo=["Botify","Mozilla/5.0 (compatible; botify; http://botify.com)","Mozilla/5.0 Mobile (compatible; botify; http://botify.com)","APIs-Google (+https://developers.google.com/webmasters/APIs-Google.html)","Mediapartners-Google","Mozilla/5.0 (Linux ; Android 5.0 ; SM-G920A) AppleWebKit (KHTML, like Gecko) Chrome Mobile Safari (compatible ; AdsBot-Google-Mobile ; +http://www.google.com/mobile/adsbot.html)","Mozilla/5.0 (iPhone ; CPU iPhone OS 9_1, like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1 (compatible ; AdsBot-Google-Mobile ; +http://www.google.com/mobile/adsbot.html)","AdsBot-Google (+http://www.google.com/adsbot.html)","Googlebot-Image/1.0","Googlebot-News","Googlebot-Video/1.0","Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)","Googlebot/2.1 (+http://www.google.com/bot.html)","(compatible; Mediapartners-Google/2.1; +http://www.google.com/bot.html)","AdsBot-Google-Mobile-Apps","Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2272.118 Safari/537.36 (compatible; Google-Read-Aloud;  +https://support.google.com/webmasters/answer/1061943)","Mozilla/5.0 (Linux; Android 7.0; SM-G930V Build/NRD90M) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/59.0.3071.125 Mobile Safari/537.36 (compatible; Google-Read-Aloud; +https://support.google.com/webmasters/answer/1061943)","Mozilla/5.0 (Linux; Android 4.2.1; en-us; Nexus 5 Build/JOP40D) AppleWebKit/535.19 (KHTML, like Gecko; googleweblight) Chrome/38.0.1025.166 Mobile Safari/535.19","Mozilla/5.0 (compatible; Qwant-news/2.0; +https://www.qwant.com/)"],ho=["compatible; Googlebot/2.1; +http://www.google.com/bot.html","GTmetrix","Google Page Speed","DareBoost","Chrome-Lighthouse","PTST"];var mo=()=>fo.indexOf(navigator.userAgent)>-1||!!ho.some((e=>navigator.userAgent.indexOf(e)>-1));const go=(e,t,n,o)=>{let r,s="";function i(e,t){return e=null!=(e=e[(t=t.pop?t:t.split(".")).shift()])?e:"",0 in t?i(e,t):e}t=Array.isArray(t)?t:t?[t]:[],t=o?0 in t?[]:[1]:t;for(r=0;r<t.length;r++){let o,a="",c=0,u="object"==typeof t[r]?t[r]:{};u={...n,...u},u[""]={"":t[r]},e.replace(/([\s\S]*?)({{((\/)|(\^)|#)(.*?)}}|$)/g,((e,t,n,r,p,l,d)=>{c?a+=c&&!p||c>1?e:t:(s+=t.replace(/{{{(.*?)}}}|{{(!?)(&?)(>?)(.*?)}}/g,((e,t,n,o,r,s)=>t?i(u,t):o?i(u,s):r?go(i(u,s),u):n?"":new Option(i(u,s)).innerHTML)),o=l),p?--c||(d=i(u,d),/^f/.test(typeof d)?s+=d.call(u,a,(e=>go(e,u))):s+=go(a,d,u,o),a=""):++c}))}return s},yo=e=>{const t=p.content||{};return t.hosts=p.hosts,t.siteName=t.siteName||"",t.deName=t.deName||`de ${t.siteName}`,t.aName=t.aName||`Ã  ${t.siteName}`,t.hasIdentity=!!oo()&&!!to()&&!!no(),t.consent={userId:oo(),timestamp:to(),date:no()},Object.keys(t.vendors||{}).forEach((e=>{t.vendors[`has${e.charAt(0).toUpperCase()}${e.slice(1)}`]=!0})),go(e,t)},vo=(e,t)=>{const n=[],o=(e,t)=>e.map((e=>t[e].name));return Object.values(t).sort(((e,t)=>{const n=e.name.toLowerCase(),o=t.name.toLowerCase();return n<o?-1:n>o?1:0})).forEach((t=>{t.cookieDuration=t.cookieMaxAgeSeconds>0&&(e=>{let t,n;return e>=31536e3?(t=Math.round(e/3600/24/365),n="an"):e>=86400?(t=Math.round(e/3600/24),n="jour"):e>=3600?(t=Math.round(e/3600),n="heure"):e>=60?(t=Math.round(e/60),n="minute"):(t=e,n="seconde"),t>1&&(n+="s"),`${t} ${n}`})(t.cookieMaxAgeSeconds),t.cookieDurationSeconds=`${t.cookieMaxAgeSeconds} seconde`,t.cookieMaxAgeSeconds>1&&(t.cookieDurationSeconds+="s"),t.hasUses=t.usesCookies||t.usesNonCookieAccess,t.hasPurposes=t.purposes.length>0||t.legIntPurposes.length>0,t.purposesList=o(t.purposes,e.purposes),t.legIntPurposesList=o(t.legIntPurposes,e.purposes),t.hasMoreList=t.specialFeatures.length>0||t.specialPurposes.length>0||t.features.length>0,t.featuresList=o(t.features,e.features),t.specialPurposesList=o(t.specialPurposes,e.specialPurposes),t.specialFeaturesList=o(t.specialFeatures,e.specialFeatures),n.push(t)})),n},bo=(e,t)=>{fetch(e).then((e=>e.json())).then((e=>{_((()=>{t(e)}))}))},_o=()=>{i(`collect impression ${p.modules[p.displayMode].tpl}`),fetch(`https://${p.hosts.cmp}/api/impression`,{credentials:"include",method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({template:p.modules[p.displayMode].tpl})})},Eo=e=>{i(`collect action ${e}`),fetch(`https://${p.hosts.cmp}/api/action`,{credentials:"include",method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({template:p.modules[p.displayMode].tpl,action:e})})};function Co(e={}){const t=O();t&&t.publisher&&(t.privacy&&null===t.privacy.getVisitorMode()&&t.privacy.setVisitorMode("cnil","exempt"),t.publisher.set(e),t.dispatch())}function wo(e={}){const t=O();t&&t.publisher&&t.publisher.send(e)}function So(e){const t=O(),n={impression:{campaignId:e||Mo()}};t?Co(n):L(Co.bind(null,n))}function Oo(){Ao("[accepter]")}function Lo(){Ao("[refuser]")}function Io(){Ao("[parametrer]")}function Ao(e,t){const n=O(),o={click:{campaignId:t||Mo(),creation:e}};n?wo(o):L(wo.bind(null,o))}function Mo(){return{cookiewall:"[cookie wall]",standard:"[cmp standard]",subscriber:"[cmp abo]"}[p.displayMode]}function Po(){const e=O();if(e&&e.privacy){const{name:t}=e.privacy.getVisitorMode()||{};if("optout"===t)return;"optin"!==t&&e.privacy.setVisitorOptin()}}function To(){const e=O();if(e&&e.privacy){const{name:t}=e.privacy.getVisitorMode()||{};if("optout"===t)return;"exempt"!==t&&e.privacy.setVisitorMode("cnil","exempt")}}function Vo(e){!function(e={}){const t=O();t&&t.click.send(e)}({name:e||function(){const e=eo();let t=null;if(e){const n=Object.values(e),o=[];for(let e=0;e<n.length;e+=1)if(!0===n[e]){const t=jo(e);t&&o.push(t)}t=o.join(" / "),o.length===n.length?t="tout_accepter":0===o.length&&(t="tout_refuser")}return t}(),chapter1:"cookies",type:"action"})}function jo(e){return{0:"analytics",1:"pub",2:"perso",3:"medias",4:"sociaux"}[e]}let Fo,ko;const Do=({target:e})=>{e&&v(e,"[data-gdpr-action=close]")&&(xo(),"function"==typeof ko&&ko())},Ro=()=>{if(Fo){const e=Fo.querySelector("[name=gdpr-partners-search]");e&&e.addEventListener("keyup",((e,t=200)=>{let n;return(...o)=>{clearTimeout(n),n=setTimeout((()=>{e.apply(window,o)}),t)}})((()=>{Fo.querySelectorAll("[data-gdpr-vendor]").forEach((t=>{""===e.value||t.getAttribute("data-gdpr-vendor").toLowerCase().indexOf(e.value.toLowerCase())>-1?t.style.display="block":t.style.display="none"}))})))}},xo=()=>{Fo&&Fo.removeEventListener("click",Do),Hn(`.${p.modules.partners.name}`),qn(!1)},No=e=>{i("render partners"),ko=e,bo(`https://${p.hosts.cmp}${p.modules.partners.tpl}?css=${p.modules.partners.css}`,(e=>{qn(!0);const t=[];t.push(fetch(`https://${p.hosts.cmp}/vendor-list.json`).then((e=>e.json()))),"fr"===p.lang&&t.push(fetch(`https://${p.hosts.cmp}/purposes-fr.json`).then((e=>e.json()))),Promise.all(t).then((t=>{Hn(".gdpr-glm-loader");const{vendors:n}=t[0],o=t[1]??t[0];Fo=$n(((e,t,n)=>{const o={vendors:[]};return o.vendors=vo(t,n),go(e,o)})(e.html,o,n)),Gn(p.modules.partners.name,e.css),Fo&&Fo.addEventListener("click",Do),Ro()}))}))};let Bo,Go;const Uo=({target:e})=>{if(e){if(v(e,"[data-gdpr-expression=acceptAll]")&&ro((()=>{Vo("tout_accepter"),Po(),!0===p.content.paramsRefresh?document.location.reload():$o()})),v(e,"[data-gdpr-expression=denyAll]")&&so((()=>{Vo("tout_refuser"),To(),!0===p.content.paramsRefresh?document.location.reload():$o()})),v(e,"[data-gdpr-action=save]")){const e={};document.querySelectorAll("[data-gdpr-params-purpose]").forEach((t=>{e[t.getAttribute("data-gdpr-params-purpose")]=t.checked})),((e,t)=>{fetch(`https://${p.hosts.cmp}/api/consent`,{credentials:"include",method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({displayMode:p.displayMode,template:p.modules[p.displayMode].tpl,expression:"partial",purposes:e})}).then((e=>e.json())).then((e=>{Dn.update(e.consentString,!1),"function"==typeof t&&t(),ao(),Nn(eo()),Bn(eo())}))})(e,(()=>{Vo(),function(){const e=eo();e&&(!0===e.analytics?Po():To())}(),!0===p.content.paramsRefresh?document.location.reload():$o()}))}v(e,"[data-gdpr-action=cancel]")&&($o(),"function"==typeof Go&&Go()),v(e,"[data-gdpr-action=partners]")&&($o(),No((()=>{Ho(Go)})))}},$o=()=>{Bo&&Bo.removeEventListener("click",Uo),Hn(`.${p.modules.parameters.name}`),qn(!1)},Ho=e=>{i("render parameters"),Go=e,bo(`https://${p.hosts.cmp}${p.modules.parameters.tpl}?css=${p.modules.parameters.css}`,(e=>{qn(!0),Bo=$n(yo(e.html)),Gn(p.modules.parameters.name,e.css);const t=eo();Object.keys(t).forEach((e=>{document.querySelector(`[data-gdpr-params-purpose=${e}]`)&&(document.querySelector(`[data-gdpr-params-purpose=${e}]`).checked=t[e])})),function(){const e=O();e&&(e.page.reset(),e.page.set({name:"gestion",level2:"",chapter1:"cookies",chapter2:"",chapter3:""}),e.dispatch())}(),Bo&&Bo.addEventListener("click",Uo)}))},qo=()=>{Hn(`.${p.modules.cookiewall.name}`),qn(!1)},Qo=()=>{i("render wall");const e=(t=document.location.host,"object"==typeof(n=p?.wall?.blacklist||!1)&&n.indexOf(t)>-1);var t,n;s(`is blacklisted page for wall ? ${e}`),!0!==e&&bo(`https://${p.hosts.cmp}${p.modules.cookiewall.tpl}?css=${p.modules.cookiewall.css}`,(e=>{qn(!0),Un($n(yo(e.html))),Gn(p.modules.cookiewall.name,e.css),So(),document.querySelector("[data-gdpr-expression=acceptAll]").addEventListener("click",(()=>{ro((()=>{Oo(),Po(),qo()}))})),document.querySelector("[data-gdpr-action=settings]")?.addEventListener("click",(()=>{Io(),qo(),Ho(Qo)})),document.querySelector(".js-gdpr-offers")?.addEventListener("click",(()=>{Eo("subscribe"),Ao("[abonnement]")})),document.querySelector(".js-gdpr-login")?.addEventListener("click",(()=>{Eo("login"),Ao("[connexion]")})),document.addEventListener("denyAllAfterSubscribe",(()=>{so((()=>{Lo(),To(),qo()}))})),_o()}))};let Ko=!1;const zo=({target:e})=>{e&&(v(e,"[data-gdpr-expression=acceptAll]")&&ro((()=>{Oo(),Po(),Jo()})),v(e,"[data-gdpr-expression=denyAll]")&&so((()=>{Lo(),To(),Jo()})),v(e,"[data-gdpr-action=settings]")&&(Io(),Jo(),Ho(Wo)),v(e,"[data-gdpr-action=partners]")&&(Jo(),No(Wo)))},Jo=()=>{Ko&&Ko.removeEventListener("click",zo),Hn(`.${p.modules.standard.name}`),qn(!1)},Wo=()=>{i("render standard"),bo(`https://${p.hosts.cmp}${p.modules.standard.tpl}?css=${p.modules.standard.css}`,(e=>{qn(!0),Ko=$n(yo(e.html)),Gn(p.modules.standard.name,e.css),So(),Ko&&Ko.addEventListener("click",zo),_o()}))};let Yo=!1;const Xo=({target:e})=>{e&&(v(e,"[data-gdpr-expression=acceptAll]")&&ro((()=>{Oo(),Po(),Zo()})),v(e,"[data-gdpr-expression=denyAll]")&&so((()=>{Lo(),To(),Zo()})),v(e,"[data-gdpr-action=settings]")&&(Io(),Zo(),Ho(er)))},Zo=()=>{Yo&&Yo.removeEventListener("click",Xo),Hn(`.${p.modules.subscriber.name}`)},er=()=>{i("render subscriber"),bo(`https://${p.hosts.cmp}${p.modules.subscriber.tpl}?css=${p.modules.subscriber.css}`,(e=>{Yo=$n(yo(e.html)),Gn(p.modules.subscriber.name,e.css),So(),Yo&&Yo.addEventListener("click",Xo),_o()}))};let tr;const nr=({target:e})=>{e&&(v(e,"[data-gdpr-action=remove]")&&(Qn.remove(Kn,{path:"/",domain:`.${t(document.location.hostname)}`}),Qn.remove(zn,{path:"/",domain:`.${t(document.location.hostname)}`}),Ao("[retirer]","[retrait consentement]"),To(),document.location.reload()),v(e,"[data-gdpr-action=cancel]")&&(Ao("[annuler]","[retrait consentement]"),or()),v(e,".js-gdpr-remove-offers")&&Ao("[abonnement]","[retrait consentement]"))},or=()=>{tr&&tr.removeEventListener("click",nr),Hn(`.${p.modules.remove.name}`),qn(!1)},rr=()=>{i("render remove-consent"),bo(`https://${p.hosts.cmp}${p.modules.remove.tpl}?css=${p.modules.remove.css}`,(e=>{qn(!0),tr=$n(yo(e.html)),Gn(p.modules.remove.name,e.css),So("[retrait consentement]"),tr&&tr.addEventListener("click",nr)}))};_((()=>i("DOM is ready"))),p.override(g),p.overrideFromSite(),(e=>{if(lo(),W(),Zn())i("consent found"),Dn.update(Xn(),!1),_((()=>{i("load script for each purposes"),ao(),Nn(eo())}));else{i("no consent found");const t=mo();if(i(`is bot ? -> ${t}`),!t)if(!0===e)switch(i(`displayMode = ${p.displayMode}`),p.displayMode){case"cookiewall":Qo();break;case"standard":Wo();break;case"subscriber":er();break;case"none":break;default:a(`invalid display mode: ${p.displayMode}`)}else switch(p.displayMode){case"standard":Wo();break;case"none":break;default:a(`invalid display mode: ${p.displayMode}`)}}b(document,"click",".gdpr-cs-remove-consent-link",(e=>{e.preventDefault(),rr()})),b(document,"click",".gdpr-cs-parameters-link",(e=>{e.preventDefault(),"cookiewall"===p.displayMode?rr():Ho()})),b(document,"click",".iubenda-cs-preferences-link",(e=>{e.preventDefault(),"cookiewall"===p.displayMode?rr():Ho()})),b(document,"click",".gdpr-cs-manage-consent-link",(e=>{e.preventDefault(),"cookiewall"===p.displayMode?rr():Ho()}))})(!0),e.configuration=p,e.getPurposes=eo,e.hasConsent=Zn,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=lemonde.min.js.map
